<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:120,&quot;tests&quot;:101,&quot;passes&quot;:101,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-11-18T21:52:57.299Z&quot;,&quot;end&quot;:&quot;2019-11-18T21:53:21.010Z&quot;,&quot;duration&quot;:23711,&quot;testsRegistered&quot;:101,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;cab12481-1fa6-4577-87b9-d127cf14c4ef&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e81e3626-ca28-4439-a166-01bcdc1da3f7&quot;,&quot;title&quot;:&quot;main-api&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f3a0ae2a-2483-454f-8f90-28f302b8a090&quot;,&quot;title&quot;:&quot;GET /api/checkAgent&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkAgent should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkAgent&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.status, 0);\n\t\t\t\tassert.strictEqual(typeof res.body.version, &#x27;string&#x27;);\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5ca3501e-f4cb-4abc-9ffe-dca48cf1223c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ca3501e-f4cb-4abc-9ffe-dca48cf1223c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8be34aa0-03f8-44dc-9f0a-6527d6d094e4&quot;,&quot;title&quot;:&quot;GET /api/checkPort&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkPort should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkPort?port=&#x27;+PORT+&#x27;&amp;host=&#x27;+HOST) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.result, true);\n\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6bd608b2-eb6d-4e45-b59a-d134910db1f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bd608b2-eb6d-4e45-b59a-d134910db1f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77f551d0-040d-4683-81ea-d06a0172c6db&quot;,&quot;title&quot;:&quot;GET /api/admin/os/cpus&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/admin/os/cpus should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/admin/os/cpus&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body), true, &#x27;body is array&#x27;)\t\t\n\t\t\t\tassert.strictEqual(res.body.length &gt; 0, true, &#x27;result is empty&#x27;)\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;51ba9c22-82b8-4e49-be72-0767d3361286&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51ba9c22-82b8-4e49-be72-0767d3361286&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5e125cb-4bec-4b08-a0de-91e74dba50b9&quot;,&quot;title&quot;:&quot;POST /api/getConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/getConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;POST&#x27;, &#x27;/api/getConfig&#x27;) )\n.then( (res) =&gt; {\t\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tconfData = res.body.data\n\tdone()\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5f75eaf6-9b20-4d38-93cb-1ef6a6dfd39f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f75eaf6-9b20-4d38-93cb-1ef6a6dfd39f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;750ec3ab-3c22-40cd-a4c1-184e1abf9219&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {}\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;19c631e8-6403-449d-9d89-a3477b3ba157&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19c631e8-6403-449d-9d89-a3477b3ba157&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97a13d11-6421-46de-965f-15b4557599df&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data.getConfig()&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data.getConfig() should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: &#x27;{}&#x27;\n}\n\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;10fa4b0d-f872-4d73-864a-bdcd10cab8d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10fa4b0d-f872-4d73-864a-bdcd10cab8d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;24ea943f-38a2-4b87-b615-dc284e4b394a&quot;,&quot;title&quot;:&quot;POST /api/setConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: confData\n}\n\nrequest( updateOpt )\n.then( (res) =&gt; {\t\n\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tdone()\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c087ce21-b01c-41b5-8110-8027ecef52b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c087ce21-b01c-41b5-8110-8027ecef52b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e6baf88-93c4-4606-b294-e83c15139697&quot;,&quot;title&quot;:&quot;plugin-dns&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2be39662-22da-4ffa-b774-8fb3d5bf82b3&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3e8a6a2e-c5d6-4da6-b556-d88999120488&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e8a6a2e-c5d6-4da6-b556-d88999120488&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d940cab8-a172-41b9-8a16-d2faec778478&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dfebd8d2-5140-4df0-a485-a15af2b0efc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfebd8d2-5140-4df0-a485-a15af2b0efc2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;171542c5-4b02-48d6-a3e5-0d9319009cf8&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse (no result)&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse (no result) should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=0.0.0.0&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;0.0.0.0&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;46b6afd4-85e9-4267-bdd8-330209a5b3be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46b6afd4-85e9-4267-bdd8-330209a5b3be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90cfe225-83b8-487c-b2e3-441b7c057817&quot;,&quot;title&quot;:&quot;GET /_plugin/filesystem&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/filesystem should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;475aed3d-6ef5-4f3d-a1d5-57eb8a46dae3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;475aed3d-6ef5-4f3d-a1d5-57eb8a46dae3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5de2aa2b-9a4f-441f-8084-f37df63274ee&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/moveFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5c1ac048-1a7d-4a8e-b1ac-fa961afbd7f7&quot;,&quot;title&quot;:&quot;POST /moveFile no path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8bfaa879-a647-4c96-9d10-de01dd72b4be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8bfaa879-a647-4c96-9d10-de01dd72b4be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ab2e2e9-c14b-4688-b109-e0e8df63184d&quot;,&quot;title&quot;:&quot;POST /moveFile no dest&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no dest should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/testmove1.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: path\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;44197c80-10df-4fd4-b4af-1977e6913786&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44197c80-10df-4fd4-b4af-1977e6913786&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf49a2b0-5e30-4af5-801a-84ad17fefe67&quot;,&quot;title&quot;:&quot;POST /moveFile to directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 - dest is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile to directory should return 400 - dest is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;473983fc-5752-4e16-bb58-8af83e0d47dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;473983fc-5752-4e16-bb58-8af83e0d47dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2100095f-0910-4b4c-b7cf-f2d085581800&quot;,&quot;title&quot;:&quot;POST /moveFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile dest directory does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.unlinkSync(tmpDir+&#x27;/blablabla&#x27;)\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c84aba2e-9e48-49ff-acda-74b326dd426c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c84aba2e-9e48-49ff-acda-74b326dd426c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0406f869-5c42-450b-a766-e3a7d553f9d0&quot;,&quot;title&quot;:&quot;POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;72946663-4f53-4d72-8a66-3c48dc1cf734&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72946663-4f53-4d72-8a66-3c48dc1cf734&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;072f8d60-4308-4620-8064-2f975d5f6ba6&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;eb50a653-7634-4bf2-96bb-10fe504971c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb50a653-7634-4bf2-96bb-10fe504971c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;adc21af2-da27-47e1-a993-b083cfae265f&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists - overwrite=true&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists - overwrite=true should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest,\n\toverwrite: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4a1f2195-161d-43c8-bba9-2da537ffa2be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a1f2195-161d-43c8-bba9-2da537ffa2be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d02612f2-7971-4f2f-b7d7-c7410eaf158c&quot;,&quot;title&quot;:&quot;POST /moveFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4153a85e-901b-4d4e-b85d-1e6c5cc45037&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4153a85e-901b-4d4e-b85d-1e6c5cc45037&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd5c5016-26e5-4f75-a2e6-6100dd4fa663&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/copyFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;83101c30-775e-4a16-b050-de45abc93073&quot;,&quot;title&quot;:&quot;POST /copyFile dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest is directory should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;47ca9a4a-84ea-4265-bbcf-69d94ed1a37a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47ca9a4a-84ea-4265-bbcf-69d94ed1a37a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5966791-9b46-4ddf-a4f1-3ae3ffb708e4&quot;,&quot;title&quot;:&quot;POST /copyFile dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest already exists should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nif (!fs.pathExistsSync(dest))\n\tfs.writeFileSync(dest, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\t\t\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a69d1d74-c7ab-430a-944b-9fa989a6ab24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a69d1d74-c7ab-430a-944b-9fa989a6ab24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eff2f8e0-46d7-4355-b880-7261f8f10bb2&quot;,&quot;title&quot;:&quot;POST /copyFile path does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceDir+&#x27;/blablabla&#x27;\nlet dest = tmpDir+&#x27;/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0c43c0a1-db7b-46dd-8c00-248697deceff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c43c0a1-db7b-46dd-8c00-248697deceff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f41a6f24-926b-4340-920f-7492f3bcef14&quot;,&quot;title&quot;:&quot;POST /copyFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest directory does not exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.removeSync(tmpDir+&#x27;/blablabla&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;19921d31-c6fb-4ac1-91f1-85ba93880585&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19921d31-c6fb-4ac1-91f1-85ba93880585&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ba63028-084f-4343-945c-044d8153a059&quot;,&quot;title&quot;:&quot;POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a45f126c-44cd-4d1d-abd2-de75ee9e2864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a45f126c-44cd-4d1d-abd2-de75ee9e2864&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a79932f8-b9d6-430a-bb67-4a5b941b87f9&quot;,&quot;title&quot;:&quot;POST /copyFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\n\t\t\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;de67d828-fe42-4dd4-8d08-dbcb34e6717f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de67d828-fe42-4dd4-8d08-dbcb34e6717f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a9cb10d-bb39-4b3c-a3f2-d62451f447bf&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f873e069-8e73-4245-92c5-8809b86ad59a&quot;,&quot;title&quot;:&quot;GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.name, &#x27;index.js&#x27;);\n\tassert.strictEqual(res.body.contentType.contains(&#x27;application/javascript&#x27;), true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7ba0120c-3126-4b0a-bd68-bf9713481e9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ba0120c-3126-4b0a-bd68-bf9713481e9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2b805ce9-12c2-4dbb-81a3-28f9ba3b0a79&quot;,&quot;title&quot;:&quot;GET /fileinfo path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=blablabla&#x27;)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c7341540-2180-4ae4-aae4-edcd5be5b7c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7341540-2180-4ae4-aae4-edcd5be5b7c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a31201b-6fb3-4d72-ac40-eaab5143c86b&quot;,&quot;title&quot;:&quot;GET /fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee55b85a-abc2-4cda-bc16-a3f75b850cc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee55b85a-abc2-4cda-bc16-a3f75b850cc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b516da6-fc0c-4320-b8f5-9b3a279a76ce&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;02a9863a-0f88-49d4-96f1-e62e25723ed7&quot;,&quot;title&quot;:&quot;GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;29f19e7e-fc16-4acd-bf5d-936f2646e2cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29f19e7e-fc16-4acd-bf5d-936f2646e2cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68fdf78a-b6a7-4594-b39c-10c234bc5936&quot;,&quot;title&quot;:&quot;GET /fileExists path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=blablabla&#x27;)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, false);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;94c2afdf-dc99-40fc-8cac-da68ffd524ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94c2afdf-dc99-40fc-8cac-da68ffd524ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0423c9a-60f0-4263-8069-b1557b1d16eb&quot;,&quot;title&quot;:&quot;GET /fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d0c39f9a-0d4d-400b-9d8b-34b2a2b53520&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0c39f9a-0d4d-400b-9d8b-34b2a2b53520&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dc36b16e-607e-40e8-b56d-3e5f1ef0286c&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/execScript&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5c34f216-9691-4732-bed8-aeb8b345b7bd&quot;,&quot;title&quot;:&quot;POST execScript type=shell&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=shell should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f8316816-46a9-41ac-ba2a-8bd361e62f01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8316816-46a9-41ac-ba2a-8bd361e62f01&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8f6aae7e-85bb-474b-a4b7-0c6f1d2e0607&quot;,&quot;title&quot;:&quot;POST execScript type=blabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=blabla should return error 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;,\n\ttype: &#x27;blabla&#x27;\n}\nexecRequestExpectError(opt, done, 412)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8b11422f-5cb3-449f-862b-79aed030335e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b11422f-5cb3-449f-862b-79aed030335e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db3588f7-e5d8-42c9-bcfb-49c9bb7ccc30&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ba5abe81-236f-4156-9500-038f7b3c41fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba5abe81-236f-4156-9500-038f7b3c41fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14712fc3-f3e9-4f3d-9f5d-3205e1a0f564&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result &amp;&amp; exitCode&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result &amp;&amp; exitCode should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\\nexitCode=2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 2);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;192e833f-e8bf-4467-b468-31c4d7d44ab7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;192e833f-e8bf-4467-b468-31c4d7d44ab7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;427bbb7a-1df7-4f52-8e47-40682844a380&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with syntax error&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with syntax error should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;blabla\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;495ea389-045b-442b-ab0a-7f724308bbda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;495ea389-045b-442b-ab0a-7f724308bbda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff1cd2d2-0dbd-48bb-8283-02cb5807b059&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;01925d93-7b56-4f3e-9d17-d67549bb5957&quot;,&quot;title&quot;:&quot;POST /_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST /_plugin/filesystem/writeTextFile should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\trequest( opt )\n\t\t\t.then( (res) =&gt; {\t\n\t\t\nassert.strictEqual(res.statusCode, 200);\nassert.strictEqual(typeof res.body, &#x27;object&#x27;);\nassert.strictEqual(typeof res.body.path, &#x27;string&#x27;);\nassert.strictEqual(res.body.result, true);\ndone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\ndone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4605e360-f29c-41e6-8ed1-18a42f2d72fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4605e360-f29c-41e6-8ed1-18a42f2d72fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edc20bb6-4518-41ec-91f1-99c1722211e2&quot;,&quot;title&quot;:&quot;POST writeTextFile, path does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST writeTextFile, path does not exist should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/blabla/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\texecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c7809c04-f4ca-4a7c-9a4c-d4d8384297f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7809c04-f4ca-4a7c-9a4c-d4d8384297f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;276ed276-a1f6-4b90-9a40-8b4c92df10d1&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/list&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5098ad9c-8aed-4fa1-b6fe-5e4b2ed16014&quot;,&quot;title&quot;:&quot;GET path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 23);\n\tassert.strictEqual(res.body.files.length, 23);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c2f43829-edca-4a94-8a90-5d6593791959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2f43829-edca-4a94-8a90-5d6593791959&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;94ba0cb7-3afe-48c3-ae7f-219b9b47dca7&quot;,&quot;title&quot;:&quot;GET recursive=false&amp;filter=*.map&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 5 .map files&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=false&amp;filter=*.map&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return 5 .map files&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=false&amp;filter=*.map&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 6);\n\tassert.strictEqual(res.body.files.length, 6);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;107165cd-e576-45df-b14d-688b2769250c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;107165cd-e576-45df-b14d-688b2769250c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b35730bb-f055-41b5-afa7-96ad462d5f96&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 244);\n\tassert.strictEqual(res.body.files.length, 244);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7665de31-6671-42db-9edf-d41a6e53da4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7665de31-6671-42db-9edf-d41a6e53da4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c49df49b-62f3-4eb9-abed-4f54733507f5&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;filter=*.js&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 73);\n\tassert.strictEqual(res.body.files.length, 73);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;241619f8-4a6e-4d75-832b-cecc81206083&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;241619f8-4a6e-4d75-832b-cecc81206083&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c776511-a042-4454-aaa6-6866f18643bd&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=&#x27;+sourceDir\n\trequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\t\tassert.strictEqual(res.body.total, 73);\n\t\tassert.strictEqual(res.body.files.length, 10);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;825bf391-40cf-4514-a850-3560d9c67591&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;825bf391-40cf-4514-a850-3560d9c67591&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e83ec4b-1a25-4193-ab13-b4d360e6b6d1&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=/blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=/blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query)\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6fbedd9-d565-45b5-89b3-0e7b589efe96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6fbedd9-d565-45b5-89b3-0e7b589efe96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0812900a-32db-4b73-8ed8-a7a1cebf9749&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3804c65b-5b91-4489-a1f0-509ef238b0de&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:676,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\t//console.log( res.body)\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;, &#x27;body is not object&#x27;);\n\t\tassert.strictEqual(typeof res.body.file, &#x27;object&#x27;, &#x27;body.file is not object&#x27;);\t\t\t\t\n\t\tassert.strictEqual(res.body.path, path, &#x27;body.path != &#x27;+path);\n\t\tassert.strictEqual(fs.pathExistsSync(path), true, &#x27;uploaded file does not exists&#x27;);\n\t\tassert.strictEqual(fs.statSync(path).size != 0, true, &#x27;uploaded file size != 0&#x27;);\n\t\t\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ac40bd49-bd05-4c01-9b7d-91bdda5b1430&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac40bd49-bd05-4c01-9b7d-91bdda5b1430&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:676,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36076cf2-0cc6-487d-937d-4cabc7ca80f8&quot;,&quot;title&quot;:&quot;upload no file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload no file should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:729,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload2.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        name: sourceFileName,\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;76155bee-fec2-4a54-906e-8aa5ead718cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76155bee-fec2-4a54-906e-8aa5ead718cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:729,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5165df28-d48e-444d-bd3d-3e4592e3fec5&quot;,&quot;title&quot;:&quot;upload file - dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest is a directory)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest is directory should return 400 (dest is a directory)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6f069a2f-9aa8-45f4-8f86-09db33a316a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f069a2f-9aa8-45f4-8f86-09db33a316a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc2cfd80-4e1f-43c5-ad00-bf8bf67066b6&quot;,&quot;title&quot;:&quot;upload file - dest directory does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest a directory does not exist)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest directory does not exist should return 400 (dest a directory does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/uploadblablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;30362ed3-7857-4dcb-8906-85481b460e13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30362ed3-7857-4dcb-8906-85481b460e13&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2353a319-8cf1-44ea-807b-6a657d54de88&quot;,&quot;title&quot;:&quot;upload existing file - overwrite=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload existing file - overwrite=false should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path+&#x27;&amp;overwrite=false&#x27;)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a0b4e4d6-a98b-4efa-a00c-075cf9084a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0b4e4d6-a98b-4efa-a00c-075cf9084a6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64c44e12-9eb2-47a7-9019-afbb23ef4170&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/deleteFiles&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f3b3f883-297e-4157-b2e4-76c549564fae&quot;,&quot;title&quot;:&quot;delete existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nfs.writeFileSync(path, &#x27;test&#x27;)\n\t\t\nrequest( opt )\n.then( (res) =&gt; {\t\n\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(fs.pathExistsSync(path), false);\n\tassert.strictEqual(res.body.result, true);\n\tassert.strictEqual(typeof res.body.filename, &#x27;string&#x27;);\n\tassert.strictEqual(res.body.path, path);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6e773de-891f-4666-8cda-f75249991a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6e773de-891f-4666-8cda-f75249991a5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b30af38-a029-47f8-af1b-04363638754d&quot;,&quot;title&quot;:&quot;delete not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete not existing file should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nif (fs.pathExistsSync(path))\n\tfs.unlinkSync(path)\n\t\t\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8b0302f6-37e0-4796-bec8-1243f725c99d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b0302f6-37e0-4796-bec8-1243f725c99d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b740862a-f077-4ac3-b5ad-b43fafb4a155&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d9931b0b-b95a-4c0c-bba9-77668042af84&quot;,&quot;title&quot;:&quot;Download existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript; charset=UTF-8&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-length&#x27;] &gt; 0 , true, &#x27;content-type &gt; 0&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;596332e6-ceff-455f-aa6c-862c880ca101&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;596332e6-ceff-455f-aa6c-862c880ca101&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c73dc16c-3afe-4f54-a215-c1726715513a&quot;,&quot;title&quot;:&quot;Download existing file - compress=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file - compress=false should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;&amp;compress=false&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\t/*assert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);*/\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;718f8878-3ff3-4fb3-832d-196c8b815f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;718f8878-3ff3-4fb3-832d-196c8b815f63&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6c26e555-8d49-4da0-ada5-281975aab8eb&quot;,&quot;title&quot;:&quot;Download file - file does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download file - file does not exists should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;/balbalba&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;90a68c53-2bd9-4880-8604-75f206c4d3c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90a68c53-2bd9-4880-8604-75f206c4d3c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f365ab84-5d0a-44a2-9bf9-dab68a0c283b&quot;,&quot;title&quot;:&quot;Download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download directory should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:433,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceDir\nlet dest = tmpDir+&#x27;/downloadZip.zip&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet destFileStream = fs.createWriteStream(dest);\nrequest( opt , (error, res, body) =&gt; {\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/zip&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;dist.zip\&quot;&#x27;);\t\t\n})\n.pipe(destFileStream)\n\t\t    .on(&#x27;finish&#x27;, () =&gt; {\n\n\t\t    \tif (fs.pathExistsSync(dest) &amp;&amp; (fs.statSync(dest).size &gt; 0))\n\t\t       \t\tdone();\t\t \t      \n\t\t       \telse\n\t\t       \t\tdone(&#x27;Downloaded file does not exists or is empty&#x27;);\t\t \t      \n\t\t    })\n\t\t    .on(&#x27;error&#x27;, (error) =&gt; {\n\t\t        done(error);\n\t\t    })&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;448fabde-ff93-4f29-9884-820b9074d954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;448fabde-ff93-4f29-9884-820b9074d954&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:433,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d74ef68-8e63-4599-bb82-754ec9b5d761&quot;,&quot;title&quot;:&quot;plugin-http&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1fd43411-6965-4ffe-8b04-0bde6fe3117a&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.body.status, 0);\n\texpect(res.body.status).to.equal(200);\n\tassert.strictEqual(typeof res.body.body.version, &#x27;string&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;24a353ea-6291-45e9-957a-5dffc92d28a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24a353ea-6291-45e9-957a-5dffc92d28a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b484b22a-6a0e-47bd-9f6c-c8c8105027fb&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown host should return 200 - content is error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;blablabla:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, true);\n\tassert.strictEqual(typeof res.body.error !== &#x27;undefined&#x27;, true);\n\tassert.strictEqual(res.body.status, null);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee1577f4-d95f-47c0-bc0a-5b36bda94eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee1577f4-d95f-47c0-bc0a-5b36bda94eb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fedaf6cc-8299-4944-8e13-45b992e64748&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown url&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error 404&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown url should return 200 - content is error 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgentBLABLABLA&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, false);\n\tassert.strictEqual(res.body.error, null);\n\tassert.strictEqual(res.body.status, 404);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;25f8d406-83ea-4b47-a7dc-f0fb4586ca27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25f8d406-83ea-4b47-a7dc-f0fb4586ca27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9beb20c9-f9d6-4561-b030-3f1f63290d8a&quot;,&quot;title&quot;:&quot;plugin-metrics&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc819084-bcad-42c5-b205-f9e0b1400835&quot;,&quot;title&quot;:&quot;GET metrics getInfos&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics getInfos should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual( _.isArray(res.body.metrics) , true, &#x27;body.metrics is not array&#x27;)\t\t\n\t\t\t\tassert.strictEqual( res.body.metrics.length , 5, &#x27;body.metrics length is not 5&#x27;)\t\t\n\t\t\t\tlet cpuMetric =  res.body.metrics[0]\n\t\t\t\tassert.strictEqual( cpuMetric.name , &#x27;cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( cpuMetric.url , &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/_plugin/metrics/cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( _.isArray(cpuMetric.args) , true, &#x27;body.metrics[0].args is not array&#x27;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6ac5e440-73a6-48e1-9086-889b835e1865&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ac5e440-73a6-48e1-9086-889b835e1865&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;600637a6-bb78-495d-a5f5-89571cdd699a&quot;,&quot;title&quot;:&quot;GET metrics systemInfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.release == &#x27;string&#x27;, true, \&quot;&#x27;release&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.uptime == &#x27;number&#x27;, true, \&quot;&#x27;uptime&#x27; property is not number&#x27;\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.osType == &#x27;string&#x27;, true, \&quot;&#x27;osType&#x27; property is not number&#x27;\&quot;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9c1fd109-ef11-4083-9229-8850455bd4a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c1fd109-ef11-4083-9229-8850455bd4a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87cd2bbc-e13c-40e1-a810-75f79d5665d5&quot;,&quot;title&quot;:&quot;GET metrics systemInfo format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 0 )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4465b81f-5751-4c40-9556-153c8bb33741&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4465b81f-5751-4c40-9556-153c8bb33741&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b49aefb-b172-429f-b45a-6fec8081aae9&quot;,&quot;title&quot;:&quot;GET metrics cpu&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.ellapsed == &#x27;number&#x27;, true, \&quot;&#x27;ellapsed&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.percentageCPU == &#x27;number&#x27;, true, \&quot;&#x27;percentageCPU&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3bdb8cf3-4391-45cc-8ef0-e5217d50f9cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bdb8cf3-4391-45cc-8ef0-e5217d50f9cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c1390e40-8b7c-44d7-aeb0-f52912058815&quot;,&quot;title&quot;:&quot;GET metrics cpu format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1016,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7a3cf8f-2a96-44a2-8bc4-0955e9aa2d1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7a3cf8f-2a96-44a2-8bc4-0955e9aa2d1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1016,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d730a09-fec1-4353-aa27-e08f373cc2ba&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 3 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1e79bb2-4c41-42fd-831a-ab7e514ab3ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1e79bb2-4c41-42fd-831a-ab7e514ab3ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6498a941-2a7e-4989-b5c1-94703034aedb&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bfde9e67-9639-4b6b-b8f5-ba4cae02a625&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfde9e67-9639-4b6b-b8f5-ba4cae02a625&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1006,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2402dbce-854b-4b5b-a98c-66c03c9fef01&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1017,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5ec7ec28-66a3-4059-8d01-9fec15081046&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ec7ec28-66a3-4059-8d01-9fec15081046&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1017,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28ae82a3-9902-472a-bdff-2ec6fe151b4e&quot;,&quot;title&quot;:&quot;GET metrics memory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedPercent == &#x27;number&#x27;, true, \&quot;&#x27;usedPercent&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedMem == &#x27;number&#x27;, true, \&quot;&#x27;usedMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.totalMem == &#x27;number&#x27;, true, \&quot;&#x27;totalMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6bdeb1f-803a-44fe-95c8-df26e76ac3de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6bdeb1f-803a-44fe-95c8-df26e76ac3de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91256ab0-9a18-4f2a-a332-7b06d0f89804&quot;,&quot;title&quot;:&quot;GET metrics memory format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f75b4acf-60d8-4c7d-8eb2-915e2423b69e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f75b4acf-60d8-4c7d-8eb2-915e2423b69e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8a7df775-b1a5-4dd1-91df-2a8a57c83c9c&quot;,&quot;title&quot;:&quot;GET metrics memory warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8553545e-a558-4d23-b55a-73977e39ebf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8553545e-a558-4d23-b55a-73977e39ebf7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e6ce3899-cffb-49f7-9b22-6d81c3f1f36f&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e481300-70f7-4564-b6ef-428579b731d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e481300-70f7-4564-b6ef-428579b731d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;09be4590-5c1f-4e73-bdf4-4e5d897f3048&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;229e0769-848b-4f17-87a2-cb48f4afc7bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;229e0769-848b-4f17-87a2-cb48f4afc7bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be5785b3-6f59-421d-bd3e-acf52796e1fe&quot;,&quot;title&quot;:&quot;GET metrics load&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load1 == &#x27;number&#x27;, true, \&quot;&#x27;load1&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load5 == &#x27;number&#x27;, true, \&quot;&#x27;load5&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.load15 == &#x27;number&#x27;, true, \&quot;&#x27;load15&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e456ba22-4aaa-42b2-bbc9-2c19a3ca9492&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e456ba22-4aaa-42b2-bbc9-2c19a3ca9492&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db55bddc-2cf5-4702-959b-4cb1cfffe678&quot;,&quot;title&quot;:&quot;GET metrics load format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7896b9d7-3c95-42fe-a74d-4c6af6279393&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7896b9d7-3c95-42fe-a74d-4c6af6279393&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e7c907a1-9880-414a-a796-bc970b90fcea&quot;,&quot;title&quot;:&quot;GET metrics load warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;86e3a13b-844d-41f8-a85d-477ac56d7199&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86e3a13b-844d-41f8-a85d-477ac56d7199&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ee31dd0-c511-4721-8019-362597576f42&quot;,&quot;title&quot;:&quot;GET metrics load warn1=10 critic1=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn1=10 critic1=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn1=10&amp;critic1=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d632ac5f-8574-419d-a90d-e5d422057210&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d632ac5f-8574-419d-a90d-e5d422057210&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0fb0e3fd-4d88-4843-99ce-bdaefe6c2be1&quot;,&quot;title&quot;:&quot;GET metrics load warn5=10 critic5=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn5=10 critic5=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn5=10&amp;critic5=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1312aed2-fcfa-4379-a2f8-f50e9373b89b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1312aed2-fcfa-4379-a2f8-f50e9373b89b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fe75912e-51cb-40ec-9878-6a35dc44c225&quot;,&quot;title&quot;:&quot;GET metrics load warn15=10 critic15=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn15=10 critic15=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn15=10&amp;critic15=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;072a1986-6096-4f45-9796-e2d946b8bff5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;072a1986-6096-4f45-9796-e2d946b8bff5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9d39a52-95ad-4544-9a11-3e99986dffcf&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;91758d82-d1f8-45e0-b785-6ea8c00d78cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91758d82-d1f8-45e0-b785-6ea8c00d78cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;38da5d38-8774-482a-a1a5-d99b408d19c4&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;047f2d91-1959-4bcb-9ea3-ea5e7e74ecd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;047f2d91-1959-4bcb-9ea3-ea5e7e74ecd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;598f047f-8166-4221-aba1-16c50d83fcb9&quot;,&quot;title&quot;:&quot;GET metrics disks&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:626,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t\tC:: {\n\t\t\t\t\tname: \&quot;C:\&quot;,\n\t\t\t\t\tfree: 5695320064,\n\t\t\t\t\ttotal: 128033222656,\n\t\t\t\t\tused: 122337902592,\n\t\t\t\t\ttotalGO: 119.2,\n\t\t\t\t\tusedGO: 113.9,\n\t\t\t\t\tfreeGO: 5.3,\n\t\t\t\t\tusedPercent: 96,\n\t\t\t\t\tisValid: true\n\t\t\t\t\t},\n\t\t\t\t*/\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6af28f54-d0ce-4d14-897a-b993f6bbb8f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6af28f54-d0ce-4d14-897a-b993f6bbb8f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:626,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37bd5360-7a3b-44f1-ae91-c10083d234a8&quot;,&quot;title&quot;:&quot;GET metrics disks format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:635,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cc550c51-2dc9-47fa-9ce2-b18464b353e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc550c51-2dc9-47fa-9ce2-b18464b353e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:635,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b7e6cd2-7001-41c9-8098-d9193c3e04f0&quot;,&quot;title&quot;:&quot;GET metrics disks warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:637,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;314a8465-37c5-418c-abde-aa6223437f56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;314a8465-37c5-418c-abde-aa6223437f56&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:637,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8c4118f5-896c-44f2-a97c-0f6ca2008042&quot;,&quot;title&quot;:&quot;GET metrics disks fs=blablabla format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks fs=blablabla format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:873,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?fs=blablabla&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f53ecc84-6bff-439e-b787-aa06b7f667a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f53ecc84-6bff-439e-b787-aa06b7f667a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:873,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48636d21-62f2-4421-9c12-0b8d10504c54&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:785,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ccfeb476-65fe-4f7d-9a44-60b5ab38991f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccfeb476-65fe-4f7d-9a44-60b5ab38991f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:785,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;282dd9e8-5bb0-4e42-aa84-dad7f2bf1b1d&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:766,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;24c3dae9-6dd7-4978-b619-cfd034b51e88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24c3dae9-6dd7-4978-b619-cfd034b51e88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:766,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12a8d92c-553d-43fa-86b4-2d9ada2408eb&quot;,&quot;title&quot;:&quot;GET /_plugin/ssh&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/ssh should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb0a9714-5b9b-46bf-a372-fade2c9227cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb0a9714-5b9b-46bf-a372-fade2c9227cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a968e8ce-4f49-413a-af25-7d05842d1035&quot;,&quot;title&quot;:&quot;/_plugin/ssh/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;546f871b-52b3-4db1-863e-9c1d2fa8a3d3&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1164,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/tmp/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\tcheckUploadResult( res, sourceFile, path  )\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;02ff63e6-7a4f-4996-83b3-d1bdd667d8da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02ff63e6-7a4f-4996-83b3-d1bdd667d8da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1164,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ea4d927-ac5e-4b00-aa05-f04107648db0&quot;,&quot;title&quot;:&quot;upload file in incorrect path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file in incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:890,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/blablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    }\n\t\t\t\n\texecRequestExpectError( opt, done, 400 )&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;442e3613-6e13-48c6-a039-0cfbcdb31ad0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;442e3613-6e13-48c6-a039-0cfbcdb31ad0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:890,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7d094d0-a458-43ac-a4f7-3397439de963&quot;,&quot;title&quot;:&quot;/_plugin/ssh with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;40430c84-8368-4730-a0c6-67e53849549a&quot;,&quot;title&quot;:&quot;exec script on unknown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script on unknown host should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: &#x27;blablabla&#x27;,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-socket&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a64d7552-6991-4719-9c69-1bdb89176e6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a64d7552-6991-4719-9c69-1bdb89176e6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2254,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;1ca750b4-7f31-443f-8423-04cddba4dc16&quot;,&quot;title&quot;:&quot;exec script with incorrect password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with incorrect password should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1323,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;188f9bb7-d712-4c6f-8a58-e3de6a9bbd17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;188f9bb7-d712-4c6f-8a58-e3de6a9bbd17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1323,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;04c60205-2af0-42cc-a9ee-e6c5a7571383&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:779,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b9c4a82b-f677-4ea0-9cf9-e4ce23953599&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b9c4a82b-f677-4ea0-9cf9-e4ce23953599&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:779,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d2b1120-0825-4cba-b12e-948f4bef11e5&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;45169970-8657-4614-a172-61c20e38aa08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45169970-8657-4614-a172-61c20e38aa08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:121,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cbf8e1a4-e211-4f20-9235-c9ab559fc0c9&quot;,&quot;title&quot;:&quot;/_plugin/ssh sftpReaddir&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb447768-301c-4841-9349-063869100a3c&quot;,&quot;title&quot;:&quot;sftpReaddir&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh sftpReaddir sftpReaddir should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:928,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\n\t\t\tlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/sftpReaddir?&#x27;+params)\n\t\t\t    \n\t\t    request( opt )\n\t\t\t.then( (res) =&gt; {\t\n\t\t\t\t\n\t\t\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(typeof res.body.result, &#x27;object&#x27;, &#x27;result is not object&#x27;);\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ed1fc243-f3e2-4196-bdb4-49a6a344b8ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed1fc243-f3e2-4196-bdb4-49a6a344b8ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:928,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5d9a164-310a-4167-81d4-2fb241d58e6c&quot;,&quot;title&quot;:&quot;sftpReadir with no path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh sftpReaddir sftpReadir with no path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\n\t\t\tlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/sftpReaddir?&#x27;+params)\n\t\t\t\n\t\t    execRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7868c13-6f05-4247-8893-c030ccf98c4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7868c13-6f05-4247-8893-c030ccf98c4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;253daa30-1793-4252-bf40-3477a99def45&quot;,&quot;title&quot;:&quot;sftpReadir with incorrect path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh sftpReaddir sftpReadir with incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:850,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/dfgdfsgfdsgdsfg&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\n\t\t\tlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/sftpReaddir?&#x27;+params)\n\t\t\t\n\t\t    execRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e6164635-91a1-4cc5-aead-e7177efc35dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6164635-91a1-4cc5-aead-e7177efc35dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:850,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e875e3e1-62f6-405f-9a9f-0ca4175a6e90&quot;,&quot;title&quot;:&quot;/_plugin/ssh with remote key&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9efe996b-f5f4-46af-9a4d-1179e9f889be&quot;,&quot;title&quot;:&quot;exec script with incorrect passphrase&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with incorrect passphrase should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e60cda42-5e54-4807-a516-c81ab9c1dd2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e60cda42-5e54-4807-a516-c81ab9c1dd2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;322fec70-7275-44b3-b2f8-5e1bdf3850fe&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:875,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n\t    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;846c90f1-0782-4161-8fe8-cf9a5806f922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;846c90f1-0782-4161-8fe8-cf9a5806f922&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:875,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e257fbd6-0ae2-44c1-a1d6-3bda6b49072e&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d3c9e2f6-039b-41eb-9beb-d70d57a7876b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3c9e2f6-039b-41eb-9beb-d70d57a7876b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff4dff6a-afb9-4042-b13d-c2959ea3b90a&quot;,&quot;title&quot;:&quot;/_plugin/ssh/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b8c641dd-c7db-41fd-aba0-aac4db8d8da7&quot;,&quot;title&quot;:&quot;download with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download with password should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:997,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/upload.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;upload.txt\&quot;&#x27;, &#x27;Content-Disposition is not attachment&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ccd59d51-dad7-464d-9e03-e6496b45a135&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccd59d51-dad7-464d-9e03-e6496b45a135&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:997,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4542ecb4-5669-4aea-b3f7-f3474322678f&quot;,&quot;title&quot;:&quot;download not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download not existing file should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:871,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/blablablaff.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b436d176-42c6-4393-8f68-e1e680e70bd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b436d176-42c6-4393-8f68-e1e680e70bd2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:871,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bbe36074-1263-423d-82c2-4a45a06c1850&quot;,&quot;title&quot;:&quot;download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download directory should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:918,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;818830de-0d96-48e8-abe0-8f8e46835468&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;818830de-0d96-48e8-abe0-8f8e46835468&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:918,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;D:\\projets\\mr-agent\\test/worker/mocha-report&quot;,&quot;reportTitle&quot;:&quot;bin&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>