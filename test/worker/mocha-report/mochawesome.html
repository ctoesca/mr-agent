<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:115,&quot;tests&quot;:97,&quot;passes&quot;:97,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-06-07T18:31:16.586Z&quot;,&quot;end&quot;:&quot;2019-06-07T18:31:37.551Z&quot;,&quot;duration&quot;:20965,&quot;testsRegistered&quot;:97,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;721f733b-6e1e-482c-83d6-38b890b0f2a8&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;231e49c6-db46-4a0c-a4d0-3303ccf7f2d7&quot;,&quot;title&quot;:&quot;main-api&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45782cb9-0f38-46d3-aadd-9e95a8f10850&quot;,&quot;title&quot;:&quot;GET /api/checkAgent&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkAgent should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkAgent&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.status, 0);\n\t\t\t\tassert.strictEqual(typeof res.body.version, &#x27;string&#x27;);\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;92341e86-e79a-4c70-a374-6b5091edc0c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92341e86-e79a-4c70-a374-6b5091edc0c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8452a220-2160-4a2e-8303-d83e1cde2e2f&quot;,&quot;title&quot;:&quot;GET /api/checkPort&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkPort should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkPort?port=&#x27;+PORT+&#x27;&amp;host=&#x27;+HOST) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.result, true);\n\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d4e5e5bc-38bc-45d1-8923-5b6dff839db8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4e5e5bc-38bc-45d1-8923-5b6dff839db8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;38e38da8-010b-49ec-be56-dea16b0307d2&quot;,&quot;title&quot;:&quot;GET /api/admin/os/cpus&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/admin/os/cpus should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/admin/os/cpus&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body), true, &#x27;body is array&#x27;)\t\t\n\t\t\t\tassert.strictEqual(res.body.length &gt; 0, true, &#x27;result is empty&#x27;)\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;821ac52d-fa71-4d74-af8b-5ef46bfaf013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;821ac52d-fa71-4d74-af8b-5ef46bfaf013&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6cfefa0-efe9-465a-be1a-69cfff862ed4&quot;,&quot;title&quot;:&quot;POST /api/getConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/getConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;POST&#x27;, &#x27;/api/getConfig&#x27;) )\n.then( (res) =&gt; {\t\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tconfData = res.body.data\n\tdone()\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e76b54e-19fd-4cd7-89f0-70053ed5046c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e76b54e-19fd-4cd7-89f0-70053ed5046c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a4a5f85-79d0-4f21-b0b1-45aad6013cef&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {}\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39f9d080-cbc2-42d1-b452-335f4ef740e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39f9d080-cbc2-42d1-b452-335f4ef740e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9cda1754-5c07-491e-b703-228d82d37b8e&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data.getConfig()&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data.getConfig() should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: &#x27;{}&#x27;\n}\n\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4980da4e-b858-40ba-8dbb-afddd22aa8ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4980da4e-b858-40ba-8dbb-afddd22aa8ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a80010b3-9515-4398-ae82-353bd756f5f2&quot;,&quot;title&quot;:&quot;POST /api/setConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: confData\n}\n\nrequest( updateOpt )\n.then( (res) =&gt; {\t\n\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tdone()\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;affdb7b4-ba85-465b-bdd7-aacee9f89f03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;affdb7b4-ba85-465b-bdd7-aacee9f89f03&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;176d5cc1-fc6f-4546-83d3-99a9ec4bdfe7&quot;,&quot;title&quot;:&quot;plugin-dns&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a20f4eca-017f-44f7-8ccb-f38276e89910&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6bab5711-f4b7-4118-a40e-aa42975667af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bab5711-f4b7-4118-a40e-aa42975667af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8137b1d9-b75d-4cc6-ae25-9ec67c2ff1fb&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e6e29283-355d-43ff-8575-54a060d396d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6e29283-355d-43ff-8575-54a060d396d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;17452e04-7505-425f-a53e-3e33d6879ab9&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse (no result)&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse (no result) should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=0.0.0.0&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;0.0.0.0&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;53207786-f7e5-49b4-acb3-1c41876e4d29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53207786-f7e5-49b4-acb3-1c41876e4d29&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2ab79cc-aee0-4a87-a4ca-e5d9bd4aa081&quot;,&quot;title&quot;:&quot;GET /_plugin/filesystem&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/filesystem should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3890f836-5721-4dc1-82ec-3bc3f2755d8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3890f836-5721-4dc1-82ec-3bc3f2755d8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63e71195-6ca4-4024-a45a-494d7e43f5f8&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/moveFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0396272e-7360-4e0d-ad5f-2aeba8f73303&quot;,&quot;title&quot;:&quot;POST /moveFile no path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3945c648-7f42-40ae-b8d6-5a9f559c7140&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3945c648-7f42-40ae-b8d6-5a9f559c7140&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4f9006e-3b91-42fd-962b-184bf68c72ed&quot;,&quot;title&quot;:&quot;POST /moveFile no dest&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no dest should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/testmove1.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: path\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;868eaeae-76dc-432c-aad9-222704a4e43b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;868eaeae-76dc-432c-aad9-222704a4e43b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56942946-71a7-4967-8b56-a7b8c0185826&quot;,&quot;title&quot;:&quot;POST /moveFile to directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 - dest is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile to directory should return 400 - dest is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7b62807d-fe6a-423e-932d-9d6e1d562f2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b62807d-fe6a-423e-932d-9d6e1d562f2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e75faeec-b813-451a-8145-a31a2a3012b6&quot;,&quot;title&quot;:&quot;POST /moveFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile dest directory does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.unlinkSync(tmpDir+&#x27;/blablabla&#x27;)\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;715d577e-f8b3-40ef-9eba-36ab580a427e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;715d577e-f8b3-40ef-9eba-36ab580a427e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;876e1ef7-31ff-4071-96f3-f1135688dfca&quot;,&quot;title&quot;:&quot;POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4826568d-956d-465e-a9c2-0f896e8862fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4826568d-956d-465e-a9c2-0f896e8862fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77e36cb6-f99a-4224-8dd7-d40b122e1edc&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e5198fa3-bac1-4ccf-9e64-76365fde1d59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5198fa3-bac1-4ccf-9e64-76365fde1d59&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa01ae55-fcfb-4907-acfb-e197eb2fbbc3&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists - overwrite=true&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists - overwrite=true should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest,\n\toverwrite: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9126c460-dae9-4b8b-a03e-862354e207d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9126c460-dae9-4b8b-a03e-862354e207d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;acb9b28b-d499-474d-b1ae-9730f8978031&quot;,&quot;title&quot;:&quot;POST /moveFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bf13d0b1-1748-4ffb-9ef3-7e97ede60f5c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf13d0b1-1748-4ffb-9ef3-7e97ede60f5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa92d7dc-4236-4c66-b521-3647291a3203&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/copyFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;616cabda-5ae9-4433-82ed-921ec80c3e03&quot;,&quot;title&quot;:&quot;POST /copyFile dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest is directory should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39107892-cfc8-46c5-8653-8ebe8b68a3ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39107892-cfc8-46c5-8653-8ebe8b68a3ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81816990-306e-4b08-b7b0-dac357373337&quot;,&quot;title&quot;:&quot;POST /copyFile dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest already exists should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nif (!fs.pathExistsSync(dest))\n\tfs.writeFileSync(dest, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\t\t\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0491da9d-c162-4f8e-a0b2-83f791379d45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0491da9d-c162-4f8e-a0b2-83f791379d45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79fc95f5-50e4-4046-ad75-aa52f93f7abe&quot;,&quot;title&quot;:&quot;POST /copyFile path does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceDir+&#x27;/blablabla&#x27;\nlet dest = tmpDir+&#x27;/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bdf0b1f1-7974-4f13-8837-467117dc424c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdf0b1f1-7974-4f13-8837-467117dc424c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4583f43-b39d-415c-83ca-ad4d46af4087&quot;,&quot;title&quot;:&quot;POST /copyFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest directory does not exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.removeSync(tmpDir+&#x27;/blablabla&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cfb2a532-2f58-4feb-80a6-c3fb1edf7f13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfb2a532-2f58-4feb-80a6-c3fb1edf7f13&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;49e2c986-d81f-4320-89fb-aef138e21b53&quot;,&quot;title&quot;:&quot;POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e9b3b61-edb6-480a-abea-50af80588981&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e9b3b61-edb6-480a-abea-50af80588981&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d03197ab-2f18-436c-875a-bc5fae074498&quot;,&quot;title&quot;:&quot;POST /copyFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\n\t\t\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9e0abf38-4a0e-4995-95d4-b1b9b8831646&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e0abf38-4a0e-4995-95d4-b1b9b8831646&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;71934310-9006-4567-8a0e-c47edb795b5b&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;868e7ff7-3292-4935-b6e6-bbc7daf408b2&quot;,&quot;title&quot;:&quot;GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.name, &#x27;index.js&#x27;);\n\tassert.strictEqual(res.body.contentType.contains(&#x27;application/javascript&#x27;), true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c2203044-2d5c-48bd-8bab-4cfec7ee723a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2203044-2d5c-48bd-8bab-4cfec7ee723a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a0b9baad-dc27-4624-a2d7-a7275ef92466&quot;,&quot;title&quot;:&quot;GET /fileinfo path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=blablabla&#x27;)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8e8da43b-65eb-4c21-81e0-02a48491681c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e8da43b-65eb-4c21-81e0-02a48491681c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;602ea40f-14ae-45c7-8400-a6253584e323&quot;,&quot;title&quot;:&quot;GET /fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;78b36431-30c8-4a05-bf25-5756f49576d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78b36431-30c8-4a05-bf25-5756f49576d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d31b3f4a-69d4-48ac-89ac-49e866b0c878&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cd9d3af6-16a7-4e9c-a669-45783c6b6c4f&quot;,&quot;title&quot;:&quot;GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;51921505-e377-4afe-9bca-f909f87e5ef1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51921505-e377-4afe-9bca-f909f87e5ef1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;510e32bb-e315-44c5-a944-3dfa97f72a95&quot;,&quot;title&quot;:&quot;GET /fileExists path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=blablabla&#x27;)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, false);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f8dffb68-8267-4f3c-b036-e75483a0a4cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8dffb68-8267-4f3c-b036-e75483a0a4cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1592bc7a-b8aa-426b-be4d-ffc7ca308a08&quot;,&quot;title&quot;:&quot;GET /fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5baac47c-6c53-48e0-aac1-70c38288518d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5baac47c-6c53-48e0-aac1-70c38288518d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;75ff0d09-b932-4df5-8baf-ce186ff020f3&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/execScript&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;24bfa6cb-556f-4cf3-94e9-ee1233b732f9&quot;,&quot;title&quot;:&quot;POST execScript type=shell&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=shell should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;af8fa3f7-e607-41c8-9613-bc81419c23a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af8fa3f7-e607-41c8-9613-bc81419c23a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8393aa6-6b11-49a7-93af-d9f5c4ffe1c9&quot;,&quot;title&quot;:&quot;POST execScript type=blabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=blabla should return error 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;,\n\ttype: &#x27;blabla&#x27;\n}\nexecRequestExpectError(opt, done, 412)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2f0f7503-efed-468e-b81a-6750d2b840d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f0f7503-efed-468e-b81a-6750d2b840d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c728d794-06bb-4caa-b9e0-8cccb4487a24&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;467e9d74-2005-476e-9fa4-66af1f00829a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;467e9d74-2005-476e-9fa4-66af1f00829a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78dd43c0-9f29-4423-9cd0-c723fe41d6de&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result &amp;&amp; exitCode&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result &amp;&amp; exitCode should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\\nexitCode=2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 2);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fea01ac8-ae77-4673-b54a-9ff667e98179&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fea01ac8-ae77-4673-b54a-9ff667e98179&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cbd28185-ef46-477c-889a-e7b57bad981f&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with syntax error&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with syntax error should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;blabla\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0caae1cf-6a09-41b0-b29f-076f02350d33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0caae1cf-6a09-41b0-b29f-076f02350d33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f52d5219-992e-4094-9a70-d91d653769ea&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1cae2c85-ce2c-4309-ae9c-e1c1a61efaa1&quot;,&quot;title&quot;:&quot;POST /_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST /_plugin/filesystem/writeTextFile should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\trequest( opt )\n\t\t\t.then( (res) =&gt; {\t\n\t\t\nassert.strictEqual(res.statusCode, 200);\nassert.strictEqual(typeof res.body, &#x27;object&#x27;);\nassert.strictEqual(typeof res.body.path, &#x27;string&#x27;);\nassert.strictEqual(res.body.result, true);\ndone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\ndone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cbce37ab-fec5-4cc8-bbcb-c1473e79c0b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cbce37ab-fec5-4cc8-bbcb-c1473e79c0b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0c99d1aa-9452-483e-928b-a722995d60b0&quot;,&quot;title&quot;:&quot;POST writeTextFile, path does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST writeTextFile, path does not exist should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/blabla/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\texecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ad72a777-1620-4bd1-a1a5-096a5d02a087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad72a777-1620-4bd1-a1a5-096a5d02a087&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;567e1b33-efad-4f02-aa37-18bf7e027340&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/list&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9d51193-89d1-4bf9-a208-b2c3d203d365&quot;,&quot;title&quot;:&quot;GET path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 23);\n\tassert.strictEqual(res.body.files.length, 23);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;992f3c7c-39b0-4ce4-9ef7-45ae1a3a1936&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;992f3c7c-39b0-4ce4-9ef7-45ae1a3a1936&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e65a73e-a639-4310-979d-7c6da9841810&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 221);\n\tassert.strictEqual(res.body.files.length, 221);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c3b1c47d-d0b5-42e5-8014-96bc4aff93bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c3b1c47d-d0b5-42e5-8014-96bc4aff93bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b5c72e29-b456-45fe-ad26-984fe2c3e72c&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;filter=*.js&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 65);\n\tassert.strictEqual(res.body.files.length, 65);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1e1e9f4f-0e47-42a5-a27b-e9b1a2e607f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e1e9f4f-0e47-42a5-a27b-e9b1a2e607f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cff016d7-0bdf-4c1f-a8ad-528cb3615d51&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=&#x27;+sourceDir\n\trequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\t\tassert.strictEqual(res.body.total, 65);\n\t\tassert.strictEqual(res.body.files.length, 10);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;546e0cc1-6111-44d2-a5d6-3e940110e2a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;546e0cc1-6111-44d2-a5d6-3e940110e2a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;65da8683-bc5d-4c54-b1bf-3b50dcf556b2&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=/blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=/blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query)\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;123ea0b4-8597-45cd-9a07-447982a07f27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;123ea0b4-8597-45cd-9a07-447982a07f27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8835942e-8e9d-4972-b1f1-bb19559c2f93&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f55a2ca5-b2e4-4cff-aaa7-b5d9a4f8ab4c&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:526,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\t//console.log( res.body)\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;, &#x27;body is not object&#x27;);\n\t\tassert.strictEqual(typeof res.body.file, &#x27;object&#x27;, &#x27;body.file is not object&#x27;);\t\t\t\t\n\t\tassert.strictEqual(res.body.path, path, &#x27;body.path != &#x27;+path);\n\t\tassert.strictEqual(fs.pathExistsSync(path), true, &#x27;uploaded file does not exists&#x27;);\n\t\tassert.strictEqual(fs.statSync(path).size != 0, true, &#x27;uploaded file size != 0&#x27;);\n\t\t\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4dba9648-05c9-4512-bb15-cda10100f1e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4dba9648-05c9-4512-bb15-cda10100f1e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:526,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f3e1ba80-27b0-4525-a91a-7056c1d81e65&quot;,&quot;title&quot;:&quot;upload no file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload no file should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:494,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload2.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        name: sourceFileName,\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;56b98088-0b30-4beb-a7e1-1afbc1274398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56b98088-0b30-4beb-a7e1-1afbc1274398&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:494,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43228f95-8af5-47c0-afc0-24c59288668f&quot;,&quot;title&quot;:&quot;upload file - dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest is a directory)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest is directory should return 400 (dest is a directory)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fdf6d425-bbe1-4e5b-9d27-f9a3692d6141&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fdf6d425-bbe1-4e5b-9d27-f9a3692d6141&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8c9975d6-1f6d-4363-8f7d-43c50299d9ac&quot;,&quot;title&quot;:&quot;upload file - dest directory does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest a directory does not exist)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest directory does not exist should return 400 (dest a directory does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/uploadblablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b606b090-3352-4aed-aae1-e909f16cff7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b606b090-3352-4aed-aae1-e909f16cff7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5e81017-6a6b-4c6e-8b26-1947a42561a8&quot;,&quot;title&quot;:&quot;upload existing file - overwrite=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload existing file - overwrite=false should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path+&#x27;&amp;overwrite=false&#x27;)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c57cfbbc-8d8d-416b-90d1-c46877ffa7e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c57cfbbc-8d8d-416b-90d1-c46877ffa7e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;053ef1f9-85ae-4790-8c5a-271cb79eaa19&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/deleteFiles&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bfbce083-5085-453e-b00c-8703ac0540b5&quot;,&quot;title&quot;:&quot;delete existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nfs.writeFileSync(path, &#x27;test&#x27;)\n\t\t\nrequest( opt )\n.then( (res) =&gt; {\t\n\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(fs.pathExistsSync(path), false);\n\tassert.strictEqual(res.body.result, true);\n\tassert.strictEqual(typeof res.body.filename, &#x27;string&#x27;);\n\tassert.strictEqual(res.body.path, path);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;12fa0c90-2c41-45a6-b514-19ea8eb27151&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12fa0c90-2c41-45a6-b514-19ea8eb27151&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93fc016b-0af4-454c-969f-c55408f4fd4c&quot;,&quot;title&quot;:&quot;delete not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete not existing file should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nif (fs.pathExistsSync(path))\n\tfs.unlinkSync(path)\n\t\t\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2a15560a-54a0-450b-8d62-89ee7ab16986&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a15560a-54a0-450b-8d62-89ee7ab16986&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eba1123c-34d7-4ea8-92e9-ec3857411f1a&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e2729105-9845-4f0d-b611-e1af68f09d8a&quot;,&quot;title&quot;:&quot;Download existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript; charset=UTF-8&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-length&#x27;] &gt; 0 , true, &#x27;content-type &gt; 0&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f55b2a1e-bae8-4481-8960-90966a64fefe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f55b2a1e-bae8-4481-8960-90966a64fefe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;da25ba56-837b-4178-b6dc-ec80f5921a08&quot;,&quot;title&quot;:&quot;Download existing file - compress=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file - compress=false should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;&amp;compress=false&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\t/*assert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);*/\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;03ef818f-281e-43de-9255-59f0aac5ce7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03ef818f-281e-43de-9255-59f0aac5ce7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c65d39f5-0102-4ece-ab1e-ec41438f9118&quot;,&quot;title&quot;:&quot;Download file - file does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download file - file does not exists should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;/balbalba&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fe0eeb6c-828a-4771-95b1-8ae6eb7faa79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe0eeb6c-828a-4771-95b1-8ae6eb7faa79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f0f1883-f257-4517-b8bf-06f6df7c2dcf&quot;,&quot;title&quot;:&quot;Download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download directory should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1587,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceDir\nlet dest = tmpDir+&#x27;/downloadZip.zip&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet destFileStream = fs.createWriteStream(dest);\nrequest( opt , (error, res, body) =&gt; {\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/zip&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;dist.zip\&quot;&#x27;);\t\t\n})\n.pipe(destFileStream)\n\t\t    .on(&#x27;finish&#x27;, () =&gt; {\n\n\t\t    \tif (fs.pathExistsSync(dest) &amp;&amp; (fs.statSync(dest).size &gt; 0))\n\t\t       \t\tdone();\t\t \t      \n\t\t       \telse\n\t\t       \t\tdone(&#x27;Downloaded file does not exists or is empty&#x27;);\t\t \t      \n\t\t    })\n\t\t    .on(&#x27;error&#x27;, (error) =&gt; {\n\t\t        done(error);\n\t\t    })&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb6d136a-58d6-4240-89b3-549c6f9705ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb6d136a-58d6-4240-89b3-549c6f9705ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1587,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2e0e729-f717-452c-b738-0d86577ef6c3&quot;,&quot;title&quot;:&quot;plugin-http&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0484eadf-3aa4-461b-a584-a2555535c986&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.body.status, 0);\n\texpect(res.body.status).to.equal(200);\n\tassert.strictEqual(typeof res.body.body.version, &#x27;string&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e6323b81-9e65-47d9-9258-35ec6218cdb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6323b81-9e65-47d9-9258-35ec6218cdb5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;789e7d34-397d-4015-a0da-7984eec1df3b&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown host should return 200 - content is error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;blablabla:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, true);\n\tassert.strictEqual(typeof res.body.error !== &#x27;undefined&#x27;, true);\n\tassert.strictEqual(res.body.status, null);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a8f2baf6-1643-4111-9a22-3ea6b5460248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a8f2baf6-1643-4111-9a22-3ea6b5460248&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;727cc44b-7ec0-4b1a-80c9-f20dd8690dd4&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown url&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error 404&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown url should return 200 - content is error 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgentBLABLABLA&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, false);\n\tassert.strictEqual(res.body.error, null);\n\tassert.strictEqual(res.body.status, 404);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7c9f51fd-563e-4577-a10e-44caadab2227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c9f51fd-563e-4577-a10e-44caadab2227&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff0ae1d5-df70-4c86-8531-d48649de0110&quot;,&quot;title&quot;:&quot;plugin-metrics&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd6b9d68-9846-488f-9b06-4e47c5742f5c&quot;,&quot;title&quot;:&quot;GET metrics getInfos&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics getInfos should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual( _.isArray(res.body.metrics) , true, &#x27;body.metrics is not array&#x27;)\t\t\n\t\t\t\tassert.strictEqual( res.body.metrics.length , 5, &#x27;body.metrics length is not 5&#x27;)\t\t\n\t\t\t\tlet cpuMetric =  res.body.metrics[0]\n\t\t\t\tassert.strictEqual( cpuMetric.name , &#x27;cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( cpuMetric.url , &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/_plugin/metrics/cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( _.isArray(cpuMetric.args) , true, &#x27;body.metrics[0].args is not array&#x27;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6993e21-2dd2-4300-b0cc-d1c51054c5ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6993e21-2dd2-4300-b0cc-d1c51054c5ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10c8d6c0-9a05-4667-b3af-77700499ddcd&quot;,&quot;title&quot;:&quot;GET metrics systemInfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.release == &#x27;string&#x27;, true, \&quot;&#x27;release&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.uptime == &#x27;number&#x27;, true, \&quot;&#x27;uptime&#x27; property is not number&#x27;\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.osType == &#x27;string&#x27;, true, \&quot;&#x27;osType&#x27; property is not number&#x27;\&quot;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b4f01c06-c76a-49dc-9f1a-7c95dd1ec2a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4f01c06-c76a-49dc-9f1a-7c95dd1ec2a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c042c59-40cf-4fae-8bb1-25d5a39a180a&quot;,&quot;title&quot;:&quot;GET metrics systemInfo format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 0 )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fce5bf40-1c7b-4043-bfb8-abb8a3e173b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fce5bf40-1c7b-4043-bfb8-abb8a3e173b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72958eee-27bb-4d56-8bef-2bd617e1630c&quot;,&quot;title&quot;:&quot;GET metrics cpu&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.ellapsed == &#x27;number&#x27;, true, \&quot;&#x27;ellapsed&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.percentageCPU == &#x27;number&#x27;, true, \&quot;&#x27;percentageCPU&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;167771bf-685d-4ec4-a1d7-8b91cbfbc2d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;167771bf-685d-4ec4-a1d7-8b91cbfbc2d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cac13f97-acde-4b9b-a184-62fa17b0904e&quot;,&quot;title&quot;:&quot;GET metrics cpu format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3f2944b1-2668-4240-8615-36fedf5edc74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f2944b1-2668-4240-8615-36fedf5edc74&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1006,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86039a73-05e8-42b0-b47a-4855743614fe&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 3 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f738830b-7b45-4774-9549-35bd5dbd8465&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f738830b-7b45-4774-9549-35bd5dbd8465&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1007,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b6e59ea4-01c6-4bd9-a1e2-41f3391ff599&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b7997c2d-82be-4acf-a185-cb6d0de04c24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7997c2d-82be-4acf-a185-cb6d0de04c24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1010,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58cdd741-5820-4716-a561-40c8869d7763&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;50e09afe-2ae7-4d44-a55e-7a0c550ea0ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50e09afe-2ae7-4d44-a55e-7a0c550ea0ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1010,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d23d40b-e049-46f0-b719-22c633d1f194&quot;,&quot;title&quot;:&quot;GET metrics memory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedPercent == &#x27;number&#x27;, true, \&quot;&#x27;usedPercent&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedMem == &#x27;number&#x27;, true, \&quot;&#x27;usedMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.totalMem == &#x27;number&#x27;, true, \&quot;&#x27;totalMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bbf30aea-4985-4c4a-aec3-29399e2ec325&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bbf30aea-4985-4c4a-aec3-29399e2ec325&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6084e539-2f98-4b2f-b816-cff0ce526897&quot;,&quot;title&quot;:&quot;GET metrics memory format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ac94a425-f5d9-484c-89be-9ea42c265a83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac94a425-f5d9-484c-89be-9ea42c265a83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86005621-988d-4102-a444-8b86df85f328&quot;,&quot;title&quot;:&quot;GET metrics memory warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb74bda4-2538-4be1-8a9e-0b04216c4784&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb74bda4-2538-4be1-8a9e-0b04216c4784&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23068c3d-512a-42c9-ac99-0ea35ebf6b60&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fa8d9aac-3ff5-4c3d-9a0d-dc46f1081e7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa8d9aac-3ff5-4c3d-9a0d-dc46f1081e7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3faeb603-cbcc-4595-9aea-1fceb9314e2d&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a7c38590-063e-42bf-9c1e-c81d1dca8060&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7c38590-063e-42bf-9c1e-c81d1dca8060&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5156ee6-2722-45e0-909a-195fb7a003de&quot;,&quot;title&quot;:&quot;GET metrics load&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load1 == &#x27;number&#x27;, true, \&quot;&#x27;load1&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load5 == &#x27;number&#x27;, true, \&quot;&#x27;load5&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.load15 == &#x27;number&#x27;, true, \&quot;&#x27;load15&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3194c9b9-6055-430d-aece-be395cc924dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3194c9b9-6055-430d-aece-be395cc924dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa60cce8-7950-4c18-92f3-36ad8921bbd1&quot;,&quot;title&quot;:&quot;GET metrics load format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ac0199b3-7828-4864-9e24-7402f0370995&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac0199b3-7828-4864-9e24-7402f0370995&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5700040f-861e-4c19-b243-9fe36fab36dd&quot;,&quot;title&quot;:&quot;GET metrics load warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;21f9dadb-3714-4811-bbe9-b44d5c269a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21f9dadb-3714-4811-bbe9-b44d5c269a74&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fc8923b3-613a-47af-8e22-34be011dc6ff&quot;,&quot;title&quot;:&quot;GET metrics load warn1=10 critic1=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn1=10 critic1=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn1=10&amp;critic1=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;284ac22a-e938-40c1-a70d-5d92a172a184&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;284ac22a-e938-40c1-a70d-5d92a172a184&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a178a8a3-6877-462f-a480-206d137fa525&quot;,&quot;title&quot;:&quot;GET metrics load warn5=10 critic5=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn5=10 critic5=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn5=10&amp;critic5=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dbad8f1f-9a28-44b5-9925-516606c7a6c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dbad8f1f-9a28-44b5-9925-516606c7a6c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34406fe7-a381-47d4-96ee-77f991bf28b8&quot;,&quot;title&quot;:&quot;GET metrics load warn15=10 critic15=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn15=10 critic15=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn15=10&amp;critic15=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;886639db-2ab6-48d7-948e-9861b444bceb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;886639db-2ab6-48d7-948e-9861b444bceb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dfe69d3f-6453-4fe6-afed-75523a4816d9&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;16b6726a-bc26-4720-baa1-40620f07cda1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16b6726a-bc26-4720-baa1-40620f07cda1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4249348f-2e75-4f98-905a-f16a252e953f&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb0a477c-f25a-479b-97a6-b0545c45fbee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb0a477c-f25a-479b-97a6-b0545c45fbee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;832f6bf5-6e21-4581-8ca4-5a302300a7cf&quot;,&quot;title&quot;:&quot;GET metrics disks&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:516,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t\tC:: {\n\t\t\t\t\tname: \&quot;C:\&quot;,\n\t\t\t\t\tfree: 5695320064,\n\t\t\t\t\ttotal: 128033222656,\n\t\t\t\t\tused: 122337902592,\n\t\t\t\t\ttotalGO: 119.2,\n\t\t\t\t\tusedGO: 113.9,\n\t\t\t\t\tfreeGO: 5.3,\n\t\t\t\t\tusedPercent: 96,\n\t\t\t\t\tisValid: true\n\t\t\t\t\t},\n\t\t\t\t*/\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;14353504-febf-4251-abd0-683ec48f544a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14353504-febf-4251-abd0-683ec48f544a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:516,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9fe8145e-999a-47f7-afa8-eb5e443e7ae1&quot;,&quot;title&quot;:&quot;GET metrics disks format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:449,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9eb79296-2faa-46dc-a8c7-6718b62c6df4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eb79296-2faa-46dc-a8c7-6718b62c6df4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:449,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b70b93da-62cf-40d6-ac0b-2dc74e10473c&quot;,&quot;title&quot;:&quot;GET metrics disks warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:484,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e3431988-c2be-4e82-8c4e-c51b0bdf6eeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3431988-c2be-4e82-8c4e-c51b0bdf6eeb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:484,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2d47677b-997e-41c3-a2d2-88dcd59b8412&quot;,&quot;title&quot;:&quot;GET metrics disks fs=blablabla format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks fs=blablabla format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:452,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?fs=blablabla&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7c16c0fd-5524-436e-b2b0-ab2e9bf88598&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c16c0fd-5524-436e-b2b0-ab2e9bf88598&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:452,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f1b67ae-283a-46c9-836f-568d962927cd&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:493,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9de432e8-1e3f-46c7-b39f-8e63f68ade2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9de432e8-1e3f-46c7-b39f-8e63f68ade2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:493,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56c1edad-7ace-4ff3-8b26-e7c1b2e9bc26&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:490,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0ce06a25-2bdc-4b03-a9af-43ec304f36e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ce06a25-2bdc-4b03-a9af-43ec304f36e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:490,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6df28d95-209b-4cbf-8802-dcee12443083&quot;,&quot;title&quot;:&quot;GET /_plugin/ssh&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/ssh should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4cc4724c-c536-4a96-80d5-0f132b5d4091&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4cc4724c-c536-4a96-80d5-0f132b5d4091&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;11d2c86f-f53c-4511-b27d-3e32f3dae6f2&quot;,&quot;title&quot;:&quot;/_plugin/ssh/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d3304e8c-4f7e-49b7-8fd1-de30fad283fd&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:983,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/tmp/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\tcheckUploadResult( res, sourceFile, path  )\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;750f9ccd-b56f-4af4-a7d4-bf348c750d0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;750f9ccd-b56f-4af4-a7d4-bf348c750d0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:983,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;985038e9-75be-421d-8cfc-47f92d4b6c03&quot;,&quot;title&quot;:&quot;upload file in incorrect path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file in incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:462,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/blablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    }\n\t\t\t\n\texecRequestExpectError( opt, done, 400 )&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;955a650c-99e5-4d0f-85ee-f1d2d44e927f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;955a650c-99e5-4d0f-85ee-f1d2d44e927f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:462,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1b6ec9d3-b931-4877-96c7-54283cb05cd3&quot;,&quot;title&quot;:&quot;/_plugin/ssh with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a443f8b6-e59d-4bec-b737-9612bf48b200&quot;,&quot;title&quot;:&quot;exec script on unknown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script on unknown host should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: &#x27;blablabla&#x27;,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-socket&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;caa35424-2000-4dc5-8e48-878dcde50ace&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;caa35424-2000-4dc5-8e48-878dcde50ace&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2259,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;e88f7b0c-f44a-4cac-9c39-f3aee50bb745&quot;,&quot;title&quot;:&quot;exec script with incorrect password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with incorrect password should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2753,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e9fadbe6-963d-43b8-9077-e1497391e884&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9fadbe6-963d-43b8-9077-e1497391e884&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2753,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;745d686a-f099-4e28-a885-45bef9a1e3b4&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;57f94e1e-32f5-462f-97da-c3bf6c1d689a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57f94e1e-32f5-462f-97da-c3bf6c1d689a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;16aaa9e2-53d5-45b1-bb5b-b82b15ff8c79&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:290,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5f3ac2c3-a91b-4518-94e1-f29b3d020206&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f3ac2c3-a91b-4518-94e1-f29b3d020206&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:290,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a540d10-115b-4f18-a8a2-a1ddbc3054be&quot;,&quot;title&quot;:&quot;/_plugin/ssh with remote key&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;88ed5f0d-ebe4-4198-8400-8413dedb72e2&quot;,&quot;title&quot;:&quot;exec script with incorrect passphrase&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with incorrect passphrase should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8119a761-f224-4a8c-a9b5-58078f565a2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8119a761-f224-4a8c-a9b5-58078f565a2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;a001a4a4-7e71-4cbf-aa80-50b8c57a786d&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:818,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;45b49a82-4ca4-481d-9153-f95ab587a599&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45b49a82-4ca4-481d-9153-f95ab587a599&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:818,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cf8ac49f-558e-4ddd-b693-d783230f0179&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:772,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6cfc48cb-febd-4c9c-932d-50b5e1f0ce47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6cfc48cb-febd-4c9c-932d-50b5e1f0ce47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:772,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9136cae-c65f-4320-a608-3551a0934d9a&quot;,&quot;title&quot;:&quot;/_plugin/ssh/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cc1e2aeb-96db-4256-966d-1ed4878479d1&quot;,&quot;title&quot;:&quot;download with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download with password should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:447,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/upload.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;upload.txt\&quot;&#x27;, &#x27;Content-Disposition is not attachment&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;18f63c6c-ff4a-40fe-8a2b-aa3a41c50f85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18f63c6c-ff4a-40fe-8a2b-aa3a41c50f85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:447,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;41a5d0a4-18ac-4474-8bfd-c36e13a1af65&quot;,&quot;title&quot;:&quot;download not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download not existing file should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:384,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/blablablaff.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e3baf58c-d10b-4e0d-bb06-c434be1eadd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3baf58c-d10b-4e0d-bb06-c434be1eadd8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:384,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1313ca19-93ad-47a2-b561-dd9c2fb24cbc&quot;,&quot;title&quot;:&quot;download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download directory should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:383,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d1a0f500-1c94-4db5-af7e-bc06542f4f8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1a0f500-1c94-4db5-af7e-bc06542f4f8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:383,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;D:\\projets\\mr-agent\\test/worker/mocha-report&quot;,&quot;reportTitle&quot;:&quot;mr-agent&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>