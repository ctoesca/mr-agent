<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:17,&quot;tests&quot;:13,&quot;passes&quot;:13,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-02-10T21:46:15.666Z&quot;,&quot;end&quot;:&quot;2019-02-10T21:46:27.713Z&quot;,&quot;duration&quot;:12047,&quot;testsRegistered&quot;:13,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;21914aa4-4a43-4dba-a1c2-9a00e27ef90f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a34a0fe5-8f56-48eb-ab6a-e9fbac83de47&quot;,&quot;title&quot;:&quot;GET /_plugin/ssh&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/ssh should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee9bd35e-4be6-4382-a6f6-7e4a12adc656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee9bd35e-4be6-4382-a6f6-7e4a12adc656&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;208bde28-c0a9-4548-bf86-a4edce79b9b4&quot;,&quot;title&quot;:&quot;/_plugin/ssh/upload&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3efb07df-fb52-43f2-8217-1b544156cbbf&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:964,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/tmp/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\tcheckUploadResult( res, sourceFile, path  )\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;916fffdd-584e-4084-abe1-e58ba199ce9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;916fffdd-584e-4084-abe1-e58ba199ce9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:964,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;197584af-c751-43d8-805c-c05835d97fef&quot;,&quot;title&quot;:&quot;upload file in incorrect path&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file in incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:797,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/blablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    }\n\t\t\t\n\texecRequestExpectError( opt, done, 400 )&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;233119cc-e5c5-4cb5-89b3-91f5a6d06fb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;233119cc-e5c5-4cb5-89b3-91f5a6d06fb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:797,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6de9dadd-511a-4e8c-aea3-0512b713e9c9&quot;,&quot;title&quot;:&quot;/_plugin/ssh with password&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;206a5001-5471-4b18-a7fa-c680e294f02a&quot;,&quot;title&quot;:&quot;exec script on unknown host&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script on unknown host should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2687,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: &#x27;blablabla&#x27;,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-socket&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;591be921-7c6a-464c-8cfb-0b77d469a678&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;591be921-7c6a-464c-8cfb-0b77d469a678&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2687,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;49a6283b-4cae-4e5a-84e1-2709e7689f7f&quot;,&quot;title&quot;:&quot;exec script with incorrect password&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with incorrect password should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2397,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6fd9ad42-b21c-4031-a862-c13f7aa6f50c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6fd9ad42-b21c-4031-a862-c13f7aa6f50c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2397,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;a7393e85-5730-4dac-b3db-ea3d07a3557e&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:601,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f6c48e97-5059-4b9a-859c-b4b15f1930d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6c48e97-5059-4b9a-859c-b4b15f1930d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:601,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b7ea2ec8-1c79-4595-b791-a79679ed5b05&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:673,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e2f50679-33dd-4e77-a2dd-9cf523ee3f72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2f50679-33dd-4e77-a2dd-9cf523ee3f72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:673,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ab44362-7862-48a8-978d-960b1d3db976&quot;,&quot;title&quot;:&quot;/_plugin/ssh with remote key&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8b782166-82ae-4aaf-80d7-9ebbbfde81a7&quot;,&quot;title&quot;:&quot;exec script with incorrect passphrase&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with incorrect passphrase should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8cde431c-6b06-4312-afd0-1b7d65f15b16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8cde431c-6b06-4312-afd0-1b7d65f15b16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;e348bdb4-fd61-4ddf-a264-0d84b2bed118&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:744,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bab5dcab-071a-44fe-9995-5d49a56f6d12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bab5dcab-071a-44fe-9995-5d49a56f6d12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:744,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3245b97c-c51b-4b76-86a6-4d9982548a9c&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:691,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;36661bb5-0d6e-40a3-aeff-9f752de9723c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36661bb5-0d6e-40a3-aeff-9f752de9723c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:691,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fda60384-02ed-42a0-b2ad-2e4490cbfb41&quot;,&quot;title&quot;:&quot;/_plugin/ssh/download&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8617f0e2-148d-41e5-a88d-4c9f997ae6d3&quot;,&quot;title&quot;:&quot;download with password&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download with password should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:786,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/upload.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;upload.txt\&quot;&#x27;, &#x27;Content-Disposition is not attachment&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;94d5d29a-028f-41b9-89ed-be16c91d9237&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94d5d29a-028f-41b9-89ed-be16c91d9237&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:786,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;433c893a-2ff6-420f-8f56-c4ce1d3161a5&quot;,&quot;title&quot;:&quot;download not existing file&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download not existing file should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:724,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/blablablaff.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;22c03bfa-1483-470b-9a7b-b4d1d44221e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22c03bfa-1483-470b-9a7b-b4d1d44221e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:724,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc0b3903-470a-4b79-9416-27173567c952&quot;,&quot;title&quot;:&quot;download directory&quot;,&quot;fullFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download directory should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:895,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7b11c34d-af62-45ef-a3f3-31233e02cf1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b11c34d-af62-45ef-a3f3-31233e02cf1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:895,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test/worker/mocha-report&quot;,&quot;reportTitle&quot;:&quot;bin&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\mocha-report\\assets&quot;,&quot;jsonFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\mocha-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;G:\\dev\\nexilearn\\mr-agent\\test\\worker\\mocha-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>