<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:115,&quot;tests&quot;:97,&quot;passes&quot;:97,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-06-27T20:54:50.213Z&quot;,&quot;end&quot;:&quot;2019-06-27T20:55:08.733Z&quot;,&quot;duration&quot;:18520,&quot;testsRegistered&quot;:97,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;d227ef58-0740-4360-bce3-76030b97a8e5&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9fdcd376-b5f7-46a5-b669-be0d88420ea7&quot;,&quot;title&quot;:&quot;main-api&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4246702a-e7ba-402a-bbfe-ab868fbbaba2&quot;,&quot;title&quot;:&quot;GET /api/checkAgent&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkAgent should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkAgent&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.status, 0);\n\t\t\t\tassert.strictEqual(typeof res.body.version, &#x27;string&#x27;);\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;384b594a-dc4c-49fe-b62f-26726578239a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;384b594a-dc4c-49fe-b62f-26726578239a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;50c85275-1306-49cf-8b8d-765e9113f0a9&quot;,&quot;title&quot;:&quot;GET /api/checkPort&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkPort should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkPort?port=&#x27;+PORT+&#x27;&amp;host=&#x27;+HOST) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.result, true);\n\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d93a505f-7182-4835-a381-ef7df217026b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d93a505f-7182-4835-a381-ef7df217026b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a1b634ac-f32e-4821-a0c7-8751cee70ce3&quot;,&quot;title&quot;:&quot;GET /api/admin/os/cpus&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/admin/os/cpus should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/admin/os/cpus&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body), true, &#x27;body is array&#x27;)\t\t\n\t\t\t\tassert.strictEqual(res.body.length &gt; 0, true, &#x27;result is empty&#x27;)\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;08422b35-644e-4e48-8c93-956d96fb5969&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08422b35-644e-4e48-8c93-956d96fb5969&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;19398856-c05d-4877-b281-39a5601ea880&quot;,&quot;title&quot;:&quot;POST /api/getConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/getConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;POST&#x27;, &#x27;/api/getConfig&#x27;) )\n.then( (res) =&gt; {\t\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tconfData = res.body.data\n\tdone()\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;74a895cc-a488-4c80-bf09-ac735114ce94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;74a895cc-a488-4c80-bf09-ac735114ce94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34ab7860-ee99-4f51-932d-f965c8bc94a6&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {}\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8ca18ac0-6977-4ee5-9d47-a5acddb4ae56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ca18ac0-6977-4ee5-9d47-a5acddb4ae56&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27d0d336-399c-4a93-b04a-737d91dfc5cb&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data.getConfig()&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data.getConfig() should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: &#x27;{}&#x27;\n}\n\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;049eacb9-c88c-4cd9-9ceb-f922ea7ae8f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;049eacb9-c88c-4cd9-9ceb-f922ea7ae8f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec12803c-83d4-4653-9e07-3d92241ca18f&quot;,&quot;title&quot;:&quot;POST /api/setConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: confData\n}\n\nrequest( updateOpt )\n.then( (res) =&gt; {\t\n\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tdone()\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3a5039a2-1712-4c6f-b576-d927bbe8eac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a5039a2-1712-4c6f-b576-d927bbe8eac2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b975eeb-be24-4f8c-87df-24e7ab5d6720&quot;,&quot;title&quot;:&quot;plugin-dns&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a3bcac10-af58-4e88-965c-10ffae3f6cea&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6a76cc6-8706-4ece-8980-e736756dafa2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6a76cc6-8706-4ece-8980-e736756dafa2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47275642-240a-4639-92ce-509878197a65&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;740325aa-9283-47b5-b966-cc94236adde9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;740325aa-9283-47b5-b966-cc94236adde9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bb6e4669-4158-41ab-be38-a9478dca9201&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse (no result)&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse (no result) should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=0.0.0.0&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;0.0.0.0&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;50d9c18f-4998-4b64-82ca-4519d364db26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50d9c18f-4998-4b64-82ca-4519d364db26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ae3f26c-721b-4ff7-980c-7a51f2ddf6ef&quot;,&quot;title&quot;:&quot;GET /_plugin/filesystem&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/filesystem should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0702832d-ada7-474f-9d25-246383248210&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0702832d-ada7-474f-9d25-246383248210&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;efa094f0-dcd8-4dd0-9813-af2bae0541a8&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/moveFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;197af324-169c-4332-bd0c-73c6ec08012c&quot;,&quot;title&quot;:&quot;POST /moveFile no path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;784a59b0-edb8-4e62-b6d3-f1524aa10814&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;784a59b0-edb8-4e62-b6d3-f1524aa10814&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2e599d68-af11-45d1-9f56-8137c3af4add&quot;,&quot;title&quot;:&quot;POST /moveFile no dest&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no dest should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/testmove1.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: path\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8fab13d7-96c4-4e89-a173-14ca632e6ff1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fab13d7-96c4-4e89-a173-14ca632e6ff1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47789f4a-1365-4ae2-8f3f-c9be7584919c&quot;,&quot;title&quot;:&quot;POST /moveFile to directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 - dest is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile to directory should return 400 - dest is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dcbd8632-ea55-46ac-81a0-b3a33798aef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dcbd8632-ea55-46ac-81a0-b3a33798aef2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edcafc44-8e01-4b86-a05c-4c132d7de9cc&quot;,&quot;title&quot;:&quot;POST /moveFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile dest directory does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.unlinkSync(tmpDir+&#x27;/blablabla&#x27;)\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;486dd7e9-4978-4346-aa5e-a4496a43b031&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;486dd7e9-4978-4346-aa5e-a4496a43b031&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;250147ab-b23c-44cc-981d-aab708424506&quot;,&quot;title&quot;:&quot;POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d37c2b2f-225c-42c4-99e9-ab1fd1535bd0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d37c2b2f-225c-42c4-99e9-ab1fd1535bd0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ea5f908f-a980-402d-9907-59cdaf421b8e&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e17f396-d422-41db-8780-63fb6495d834&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e17f396-d422-41db-8780-63fb6495d834&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;03be8566-9378-4b28-8e79-dc97b898903a&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists - overwrite=true&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists - overwrite=true should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest,\n\toverwrite: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c2a2321a-6dd5-445d-b458-7f2058ae45e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2a2321a-6dd5-445d-b458-7f2058ae45e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10a4b4f3-97cd-4a8f-a53c-f18aad7cd3d7&quot;,&quot;title&quot;:&quot;POST /moveFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0cf56797-4b11-4d58-9089-bc13369b86cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cf56797-4b11-4d58-9089-bc13369b86cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3bc8e1e4-32f6-46ee-be9b-9aebf3f43d5c&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/copyFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;adabacba-47e7-4223-a1ad-55fc7fa2f2e0&quot;,&quot;title&quot;:&quot;POST /copyFile dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest is directory should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8439283c-9254-4dd9-81f3-e2f06e8b6288&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8439283c-9254-4dd9-81f3-e2f06e8b6288&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1209f8a2-ec25-4ed0-b9db-55e01e012b5e&quot;,&quot;title&quot;:&quot;POST /copyFile dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest already exists should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nif (!fs.pathExistsSync(dest))\n\tfs.writeFileSync(dest, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\t\t\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1f789482-04a3-40f1-ae76-5893d5864390&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f789482-04a3-40f1-ae76-5893d5864390&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c3d74ae-f45c-4217-87a9-8ca56c47f6eb&quot;,&quot;title&quot;:&quot;POST /copyFile path does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceDir+&#x27;/blablabla&#x27;\nlet dest = tmpDir+&#x27;/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1f31a41f-c71e-4ba9-a3cf-3400b104d501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f31a41f-c71e-4ba9-a3cf-3400b104d501&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45a5d64f-b87a-4c27-a031-21af2c6d8014&quot;,&quot;title&quot;:&quot;POST /copyFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest directory does not exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.removeSync(tmpDir+&#x27;/blablabla&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;38f820c8-61b6-4ad7-bf06-982bf2543bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38f820c8-61b6-4ad7-bf06-982bf2543bc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef974abe-038c-4ef4-9900-87c5598ad65f&quot;,&quot;title&quot;:&quot;POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;21b56b57-fb99-4231-a636-a5eefe726e7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21b56b57-fb99-4231-a636-a5eefe726e7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c42d487f-d67e-4a8c-b46a-8623459359ef&quot;,&quot;title&quot;:&quot;POST /copyFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\n\t\t\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;36dfba9b-55f3-4b8e-8677-e7470ea214bb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36dfba9b-55f3-4b8e-8677-e7470ea214bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;209f22b7-12d1-4901-b948-b6a73edbac03&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5fcd0457-4b88-49b9-8d4c-d9322acfd12c&quot;,&quot;title&quot;:&quot;GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.name, &#x27;index.js&#x27;);\n\tassert.strictEqual(res.body.contentType.contains(&#x27;application/javascript&#x27;), true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7614a88-7bd8-42ba-a616-60d3bc6263e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7614a88-7bd8-42ba-a616-60d3bc6263e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b0dc85e-86cc-4a98-b605-4e90d30f7f8a&quot;,&quot;title&quot;:&quot;GET /fileinfo path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=blablabla&#x27;)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4f30a6dc-0b34-4ab1-86c8-1433c816e013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f30a6dc-0b34-4ab1-86c8-1433c816e013&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c20436fe-cf75-4a8d-8ed1-7a3d5c863842&quot;,&quot;title&quot;:&quot;GET /fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fe75b1dd-f9c5-4788-9e5b-abb2b6c187af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe75b1dd-f9c5-4788-9e5b-abb2b6c187af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ceb0aade-79de-4e5b-b317-0a92ceb18975&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2134ea40-e6dd-4053-aa84-8866ea6dbfc1&quot;,&quot;title&quot;:&quot;GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;312eb0b2-14d1-4d44-9607-d4023bcad1f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;312eb0b2-14d1-4d44-9607-d4023bcad1f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97091577-66a3-4c17-abc6-ea01ac5527af&quot;,&quot;title&quot;:&quot;GET /fileExists path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=blablabla&#x27;)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, false);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a7cf3ab0-0b99-4b5d-b876-993b28c0b031&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7cf3ab0-0b99-4b5d-b876-993b28c0b031&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e214b921-98f0-4232-bc35-bc1fcdb6da90&quot;,&quot;title&quot;:&quot;GET /fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a6de223f-dec1-4f49-bc72-275bc75baf57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6de223f-dec1-4f49-bc72-275bc75baf57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec8fd391-9b3f-4b44-8731-7a979e33fead&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/execScript&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d3383696-545a-4998-94ef-88e0c0b27de5&quot;,&quot;title&quot;:&quot;POST execScript type=shell&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=shell should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;51514e52-4053-49b3-a5f3-e84146f66356&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51514e52-4053-49b3-a5f3-e84146f66356&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fd6f5110-9cfa-4e65-8c74-9b707b852dcc&quot;,&quot;title&quot;:&quot;POST execScript type=blabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=blabla should return error 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;,\n\ttype: &#x27;blabla&#x27;\n}\nexecRequestExpectError(opt, done, 412)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a1e69f07-5725-4161-8194-8cf3e64962f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1e69f07-5725-4161-8194-8cf3e64962f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f67da77a-b149-496f-bd4b-01042b7071e3&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3a058733-8d83-480d-b534-accaa284b9ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a058733-8d83-480d-b534-accaa284b9ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c936a5d-98ad-42da-89ba-cfb6875d6260&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result &amp;&amp; exitCode&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result &amp;&amp; exitCode should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\\nexitCode=2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 2);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;60bc2fb2-db2e-4993-b9af-04e6479dc647&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60bc2fb2-db2e-4993-b9af-04e6479dc647&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4c7bcca7-10b7-4021-9024-cb10fe25506c&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with syntax error&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with syntax error should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;blabla\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ae5920e0-ed70-4af3-9ab9-bc2c49cdd079&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae5920e0-ed70-4af3-9ab9-bc2c49cdd079&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;694a72dc-9358-4c7a-8a7a-0cf2a1ec9065&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d3fdf6ce-4305-4a71-8e61-8d7331dee958&quot;,&quot;title&quot;:&quot;POST /_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST /_plugin/filesystem/writeTextFile should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\trequest( opt )\n\t\t\t.then( (res) =&gt; {\t\n\t\t\nassert.strictEqual(res.statusCode, 200);\nassert.strictEqual(typeof res.body, &#x27;object&#x27;);\nassert.strictEqual(typeof res.body.path, &#x27;string&#x27;);\nassert.strictEqual(res.body.result, true);\ndone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\ndone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ddaf612d-9276-4c2f-9f2c-528b70626b00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ddaf612d-9276-4c2f-9f2c-528b70626b00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c748f215-9c3a-4263-bc3b-67c39102c1fe&quot;,&quot;title&quot;:&quot;POST writeTextFile, path does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST writeTextFile, path does not exist should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/blabla/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\texecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1b6aaf6-59f4-4787-8aa2-12a11a6a4fea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1b6aaf6-59f4-4787-8aa2-12a11a6a4fea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d66d6c3-5ba4-4828-8202-1dd7a2bddea9&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/list&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;424cdd2a-4a28-4791-88aa-ad43690396af&quot;,&quot;title&quot;:&quot;GET path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 23);\n\tassert.strictEqual(res.body.files.length, 23);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4281420a-992b-42b7-9670-600069722e82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4281420a-992b-42b7-9670-600069722e82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a7c1ac9-70cd-4eaa-82a8-2a3b85eb42c9&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 233);\n\tassert.strictEqual(res.body.files.length, 233);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee348b2f-4b98-4ed1-8e0f-fdb602180e4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee348b2f-4b98-4ed1-8e0f-fdb602180e4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5528ba4d-0aa6-4f8a-911a-f2326f1ccab9&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;filter=*.js&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 69);\n\tassert.strictEqual(res.body.files.length, 69);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b31e95f4-53ff-4901-8148-ff1a2607c1f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b31e95f4-53ff-4901-8148-ff1a2607c1f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4ad238e-023e-458f-a195-b58c3971a783&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=&#x27;+sourceDir\n\trequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\t\tassert.strictEqual(res.body.total, 69);\n\t\tassert.strictEqual(res.body.files.length, 10);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c973c0e8-6c4c-482b-ba62-1335ba833048&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c973c0e8-6c4c-482b-ba62-1335ba833048&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6bfa15ba-20c2-48a4-bb8c-8522297f3b83&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=/blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=/blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query)\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;598c890d-a541-45d2-8c99-97d6f847cb20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;598c890d-a541-45d2-8c99-97d6f847cb20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d6c2695-ed89-45d3-8f1f-7c79aa07001f&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bf836cac-e722-4052-a0cb-efbb119f6835&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:606,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\t//console.log( res.body)\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;, &#x27;body is not object&#x27;);\n\t\tassert.strictEqual(typeof res.body.file, &#x27;object&#x27;, &#x27;body.file is not object&#x27;);\t\t\t\t\n\t\tassert.strictEqual(res.body.path, path, &#x27;body.path != &#x27;+path);\n\t\tassert.strictEqual(fs.pathExistsSync(path), true, &#x27;uploaded file does not exists&#x27;);\n\t\tassert.strictEqual(fs.statSync(path).size != 0, true, &#x27;uploaded file size != 0&#x27;);\n\t\t\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f149faa0-b57b-40af-bd53-f77ed04fc76a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f149faa0-b57b-40af-bd53-f77ed04fc76a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:606,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb785ae5-4d80-49c7-823a-c22ac9314c46&quot;,&quot;title&quot;:&quot;upload no file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload no file should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1519,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload2.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        name: sourceFileName,\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6dc394d8-68c2-443b-96c7-2daf32e28c02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6dc394d8-68c2-443b-96c7-2daf32e28c02&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1519,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;50bbf2d4-c0a1-4173-abdb-e48954b9c909&quot;,&quot;title&quot;:&quot;upload file - dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest is a directory)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest is directory should return 400 (dest is a directory)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c7100b47-bbd5-4bac-b469-e70314551c08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7100b47-bbd5-4bac-b469-e70314551c08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;901043d0-f099-4ba5-a065-8f49f30dc70a&quot;,&quot;title&quot;:&quot;upload file - dest directory does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest a directory does not exist)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest directory does not exist should return 400 (dest a directory does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/uploadblablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0366617a-d4e5-4532-8b04-bbbef473afec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0366617a-d4e5-4532-8b04-bbbef473afec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bdc2bfe5-77a9-41c6-ab12-225cb508b55f&quot;,&quot;title&quot;:&quot;upload existing file - overwrite=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload existing file - overwrite=false should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path+&#x27;&amp;overwrite=false&#x27;)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1ec5ff9a-139b-4ae4-b64a-ae2204440f0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ec5ff9a-139b-4ae4-b64a-ae2204440f0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3de140c3-91eb-4081-b070-957e3a8cf706&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/deleteFiles&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3253deb8-fdc1-4403-9a6a-e4e9ffc22f2f&quot;,&quot;title&quot;:&quot;delete existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nfs.writeFileSync(path, &#x27;test&#x27;)\n\t\t\nrequest( opt )\n.then( (res) =&gt; {\t\n\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(fs.pathExistsSync(path), false);\n\tassert.strictEqual(res.body.result, true);\n\tassert.strictEqual(typeof res.body.filename, &#x27;string&#x27;);\n\tassert.strictEqual(res.body.path, path);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ba6a7efe-e845-44ef-832f-36a3a075be79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba6a7efe-e845-44ef-832f-36a3a075be79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8964817-f027-47f0-950d-f39d0d8778e5&quot;,&quot;title&quot;:&quot;delete not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete not existing file should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nif (fs.pathExistsSync(path))\n\tfs.unlinkSync(path)\n\t\t\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aacb50da-5525-467b-97e7-4422947e3e08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aacb50da-5525-467b-97e7-4422947e3e08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9620569f-8b57-44c8-a382-ba9dd6bc895c&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;951b0017-2271-485f-b6a8-1b3c73129a09&quot;,&quot;title&quot;:&quot;Download existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript; charset=UTF-8&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-length&#x27;] &gt; 0 , true, &#x27;content-type &gt; 0&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d423bef6-137d-4f2c-8b8b-88c7941944c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d423bef6-137d-4f2c-8b8b-88c7941944c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;afd76179-bb3a-412a-a0ee-167377db8fde&quot;,&quot;title&quot;:&quot;Download existing file - compress=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file - compress=false should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;&amp;compress=false&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\t/*assert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);*/\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;12ef8441-7968-43cf-84f2-8c815ced1822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12ef8441-7968-43cf-84f2-8c815ced1822&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8a5206f9-da42-411c-93b8-dd947beeac56&quot;,&quot;title&quot;:&quot;Download file - file does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download file - file does not exists should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;/balbalba&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8f5bdefd-404d-4d92-8c8c-2e279ed110ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f5bdefd-404d-4d92-8c8c-2e279ed110ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ad0a36cc-e1e3-4656-b6d8-545eb6cb1308&quot;,&quot;title&quot;:&quot;Download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download directory should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:406,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceDir\nlet dest = tmpDir+&#x27;/downloadZip.zip&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet destFileStream = fs.createWriteStream(dest);\nrequest( opt , (error, res, body) =&gt; {\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/zip&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;dist.zip\&quot;&#x27;);\t\t\n})\n.pipe(destFileStream)\n\t\t    .on(&#x27;finish&#x27;, () =&gt; {\n\n\t\t    \tif (fs.pathExistsSync(dest) &amp;&amp; (fs.statSync(dest).size &gt; 0))\n\t\t       \t\tdone();\t\t \t      \n\t\t       \telse\n\t\t       \t\tdone(&#x27;Downloaded file does not exists or is empty&#x27;);\t\t \t      \n\t\t    })\n\t\t    .on(&#x27;error&#x27;, (error) =&gt; {\n\t\t        done(error);\n\t\t    })&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bae96f87-f3c7-4877-aa5f-3cfad5b57114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bae96f87-f3c7-4877-aa5f-3cfad5b57114&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:406,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;533d91e7-01e8-4e9b-8e01-cd8fe409dcbb&quot;,&quot;title&quot;:&quot;plugin-http&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3bd2bfc8-9112-4634-b232-377442ff9d76&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.body.status, 0);\n\texpect(res.body.status).to.equal(200);\n\tassert.strictEqual(typeof res.body.body.version, &#x27;string&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;47d98c88-5c12-4987-9d63-72defef36dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47d98c88-5c12-4987-9d63-72defef36dc3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2b2711b9-f6b3-4b87-8dc8-662ef76dbc57&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown host should return 200 - content is error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;blablabla:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, true);\n\tassert.strictEqual(typeof res.body.error !== &#x27;undefined&#x27;, true);\n\tassert.strictEqual(res.body.status, null);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5b9b5409-84bc-4d39-ba19-7cfc13a6e74b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b9b5409-84bc-4d39-ba19-7cfc13a6e74b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3fa28878-7707-4c74-95f5-4749510f9847&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown url&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error 404&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown url should return 200 - content is error 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgentBLABLABLA&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, false);\n\tassert.strictEqual(res.body.error, null);\n\tassert.strictEqual(res.body.status, 404);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2e2fddc9-16cf-4eda-b3b9-0d37b34fb909&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e2fddc9-16cf-4eda-b3b9-0d37b34fb909&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18157a8b-a999-4dda-a035-187a87249dff&quot;,&quot;title&quot;:&quot;plugin-metrics&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8dbc24df-6eb8-44f7-bb52-567a36849813&quot;,&quot;title&quot;:&quot;GET metrics getInfos&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics getInfos should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual( _.isArray(res.body.metrics) , true, &#x27;body.metrics is not array&#x27;)\t\t\n\t\t\t\tassert.strictEqual( res.body.metrics.length , 5, &#x27;body.metrics length is not 5&#x27;)\t\t\n\t\t\t\tlet cpuMetric =  res.body.metrics[0]\n\t\t\t\tassert.strictEqual( cpuMetric.name , &#x27;cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( cpuMetric.url , &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/_plugin/metrics/cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( _.isArray(cpuMetric.args) , true, &#x27;body.metrics[0].args is not array&#x27;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d9abfb32-5135-43c5-88e5-a466326140df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9abfb32-5135-43c5-88e5-a466326140df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1666e968-a3d5-4dd3-a037-4511adab7ff5&quot;,&quot;title&quot;:&quot;GET metrics systemInfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.release == &#x27;string&#x27;, true, \&quot;&#x27;release&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.uptime == &#x27;number&#x27;, true, \&quot;&#x27;uptime&#x27; property is not number&#x27;\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.osType == &#x27;string&#x27;, true, \&quot;&#x27;osType&#x27; property is not number&#x27;\&quot;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dd88fe7d-3fd0-47d7-80f7-fab7e88b2bf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd88fe7d-3fd0-47d7-80f7-fab7e88b2bf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ea29429-ce09-4ab8-aa8e-c555e44f9e1e&quot;,&quot;title&quot;:&quot;GET metrics systemInfo format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 0 )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e85f3ac1-148e-48d0-a54c-d231d60ee3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e85f3ac1-148e-48d0-a54c-d231d60ee3fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;135215b4-16a8-4736-b70d-068610125278&quot;,&quot;title&quot;:&quot;GET metrics cpu&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.ellapsed == &#x27;number&#x27;, true, \&quot;&#x27;ellapsed&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.percentageCPU == &#x27;number&#x27;, true, \&quot;&#x27;percentageCPU&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fcda0407-03bc-4eef-a81d-1cfc24977272&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcda0407-03bc-4eef-a81d-1cfc24977272&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1006,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14c797b3-c4d7-4712-b2b6-90aa85b5be69&quot;,&quot;title&quot;:&quot;GET metrics cpu format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;44d66aa7-6536-4e88-a626-b5330bf630e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44d66aa7-6536-4e88-a626-b5330bf630e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1010,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d0dde9bb-14a8-4a0f-9241-87c86594b057&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 3 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;29637705-06ac-4f1e-9c5d-1b413b866bfe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29637705-06ac-4f1e-9c5d-1b413b866bfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1006,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9560a754-4de7-4757-a3f4-2b9929178c2d&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1017,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2e9d132a-7e53-4e9f-ac36-a19962952bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e9d132a-7e53-4e9f-ac36-a19962952bd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1017,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;59a783e7-48ea-41c7-83d6-8fbc3016abd8&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ff9d394e-e118-473b-9937-015cce801fe2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff9d394e-e118-473b-9937-015cce801fe2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1009,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;142b24ab-0128-4eaa-8583-d3adccc2aadf&quot;,&quot;title&quot;:&quot;GET metrics memory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedPercent == &#x27;number&#x27;, true, \&quot;&#x27;usedPercent&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedMem == &#x27;number&#x27;, true, \&quot;&#x27;usedMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.totalMem == &#x27;number&#x27;, true, \&quot;&#x27;totalMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;281c8c4f-aded-448e-aa09-c2da9424ee40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;281c8c4f-aded-448e-aa09-c2da9424ee40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9fa62063-c190-4821-b949-464d25fadac7&quot;,&quot;title&quot;:&quot;GET metrics memory format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;45da2b0f-4805-42b3-b3c0-eba7e5095c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45da2b0f-4805-42b3-b3c0-eba7e5095c5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edefdee6-d722-45c1-aa2f-46ef577cf1f0&quot;,&quot;title&quot;:&quot;GET metrics memory warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;874881fa-a10c-449c-a397-da4380e8c2b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;874881fa-a10c-449c-a397-da4380e8c2b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c2684542-a41e-4508-ba7d-3cdcfdf29080&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0c5bb057-75c6-4e33-9a55-090e6d7af86c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c5bb057-75c6-4e33-9a55-090e6d7af86c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bd728848-a270-4c44-bb91-1612406572f1&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f6b3648f-e810-4eb6-86fd-6dba3f0cffc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6b3648f-e810-4eb6-86fd-6dba3f0cffc3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d41c8641-d247-4649-95a9-9f266dd9a7ac&quot;,&quot;title&quot;:&quot;GET metrics load&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load1 == &#x27;number&#x27;, true, \&quot;&#x27;load1&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load5 == &#x27;number&#x27;, true, \&quot;&#x27;load5&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.load15 == &#x27;number&#x27;, true, \&quot;&#x27;load15&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1b8d744-51a6-4902-89f0-2e248547efa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1b8d744-51a6-4902-89f0-2e248547efa3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;38888c38-7560-44c2-9116-4ca130b1881b&quot;,&quot;title&quot;:&quot;GET metrics load format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ff339ca0-3441-49ae-abdd-708a67f5ab96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff339ca0-3441-49ae-abdd-708a67f5ab96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;024d1f10-6b3f-4113-b15e-170967bc19b6&quot;,&quot;title&quot;:&quot;GET metrics load warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;80ab92ee-c411-4e4c-82f9-36f1b496e4ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80ab92ee-c411-4e4c-82f9-36f1b496e4ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28e2e874-645b-4e4b-8b6c-ffd5c1582f9c&quot;,&quot;title&quot;:&quot;GET metrics load warn1=10 critic1=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn1=10 critic1=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn1=10&amp;critic1=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;14cc3bf7-69b0-42c0-98c8-1748e4fa5d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14cc3bf7-69b0-42c0-98c8-1748e4fa5d8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;511fe343-a4dd-40fc-9417-61484e9c097a&quot;,&quot;title&quot;:&quot;GET metrics load warn5=10 critic5=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn5=10 critic5=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn5=10&amp;critic5=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b7add7e3-39ed-42c0-9fcb-e34e8e6f4651&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7add7e3-39ed-42c0-9fcb-e34e8e6f4651&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;35e8da64-b9fe-479b-a24d-341dd7886ef3&quot;,&quot;title&quot;:&quot;GET metrics load warn15=10 critic15=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn15=10 critic15=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn15=10&amp;critic15=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b6913656-1cce-4326-aba3-76c1d5607759&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6913656-1cce-4326-aba3-76c1d5607759&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23cc9515-f08c-47a8-b1b6-d38b207abc9e&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6344b2c6-1240-4d0e-9b2e-ea4195429e62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6344b2c6-1240-4d0e-9b2e-ea4195429e62&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c12ca13a-b826-4e50-b9cf-d686886a89f3&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;607f2cfa-b890-4c5d-9b1c-d8b44e41d943&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;607f2cfa-b890-4c5d-9b1c-d8b44e41d943&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be74588c-666b-4e2d-9088-a6765347bafd&quot;,&quot;title&quot;:&quot;GET metrics disks&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:494,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t\tC:: {\n\t\t\t\t\tname: \&quot;C:\&quot;,\n\t\t\t\t\tfree: 5695320064,\n\t\t\t\t\ttotal: 128033222656,\n\t\t\t\t\tused: 122337902592,\n\t\t\t\t\ttotalGO: 119.2,\n\t\t\t\t\tusedGO: 113.9,\n\t\t\t\t\tfreeGO: 5.3,\n\t\t\t\t\tusedPercent: 96,\n\t\t\t\t\tisValid: true\n\t\t\t\t\t},\n\t\t\t\t*/\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d8b9609e-4b78-424d-b3ca-6dfef17117c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8b9609e-4b78-424d-b3ca-6dfef17117c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:494,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78b1b618-fad4-4d00-bcc2-4b7560daa18b&quot;,&quot;title&quot;:&quot;GET metrics disks format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:478,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c8c69f00-dcca-4711-ba5d-e0323bedbcc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8c69f00-dcca-4711-ba5d-e0323bedbcc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:478,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40208a22-37af-48b5-adb3-2a637ee3157f&quot;,&quot;title&quot;:&quot;GET metrics disks warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:469,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;87028262-cc43-45a2-877b-fbd263023a7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87028262-cc43-45a2-877b-fbd263023a7d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:469,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9c5ee6b-4ef1-4af3-9bbf-b1e42302b9c7&quot;,&quot;title&quot;:&quot;GET metrics disks fs=blablabla format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks fs=blablabla format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:456,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?fs=blablabla&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aedbbd92-5695-488b-b01e-ef5c80a75c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aedbbd92-5695-488b-b01e-ef5c80a75c2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:456,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;660be41d-e224-4e2d-8326-1c65f4aa9156&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:475,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7e5c2f6-afae-4593-8b2b-a52a84a32ff0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7e5c2f6-afae-4593-8b2b-a52a84a32ff0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:475,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f595de4-e2d8-43fa-b023-a138ddfaba1b&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:523,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;279f2255-7259-414b-96f3-013dece9a29b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;279f2255-7259-414b-96f3-013dece9a29b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:523,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c946477-ff4b-4f3f-a7a4-334476051baa&quot;,&quot;title&quot;:&quot;GET /_plugin/ssh&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/ssh should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ce912ea0-5a64-4fcf-807c-ea160d327fe1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce912ea0-5a64-4fcf-807c-ea160d327fe1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ad475f5-d6fa-4ca2-b45c-6d8609ccba7f&quot;,&quot;title&quot;:&quot;/_plugin/ssh/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;df655060-cdfa-4bb0-a9d8-91389795fe65&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/tmp/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\tcheckUploadResult( res, sourceFile, path  )\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7024a5d1-e2fc-455f-8002-812e5a78d05c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7024a5d1-e2fc-455f-8002-812e5a78d05c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:411,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27d9cf73-902c-4217-a832-586afdf2446c&quot;,&quot;title&quot;:&quot;upload file in incorrect path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file in incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:340,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/blablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    }\n\t\t\t\n\texecRequestExpectError( opt, done, 400 )&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f9060f75-5379-4806-834a-9710eb1c13d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9060f75-5379-4806-834a-9710eb1c13d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:340,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0860dd7f-fe76-41dc-b421-2f6b9ef81003&quot;,&quot;title&quot;:&quot;/_plugin/ssh with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;123e2769-8bab-44a2-a449-d978463ea4fc&quot;,&quot;title&quot;:&quot;exec script on unknown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script on unknown host should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2262,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: &#x27;blablabla&#x27;,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-socket&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bab44543-820b-4385-9fab-ffdb266ce9d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bab44543-820b-4385-9fab-ffdb266ce9d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2262,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;8073ee0f-d089-46c7-b535-d3781546a2a3&quot;,&quot;title&quot;:&quot;exec script with incorrect password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with incorrect password should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2237,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9fe16edf-c2e2-43f2-a02b-56d7304a5c79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fe16edf-c2e2-43f2-a02b-56d7304a5c79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2237,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;6a8475bc-ab83-4905-bfd5-05d9b1024793&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:312,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ff515ef6-df1f-44fd-879e-c3085a9ef0cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff515ef6-df1f-44fd-879e-c3085a9ef0cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:312,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;303f82bc-3d9d-4838-8e6a-14cfb2a5bc49&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:288,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4b78b763-c9a8-4716-8202-9cdbb44a304d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b78b763-c9a8-4716-8202-9cdbb44a304d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:288,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb852aff-7ff2-4233-a36c-7ee5b1e9ec67&quot;,&quot;title&quot;:&quot;/_plugin/ssh with remote key&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7b80d874-2d4d-46c2-a6d1-b2e8a9cdfd23&quot;,&quot;title&quot;:&quot;exec script with incorrect passphrase&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with incorrect passphrase should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ec74fce0-18e6-4f06-a293-b57941b0e65d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec74fce0-18e6-4f06-a293-b57941b0e65d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;90845b4f-5801-46a4-9bab-4a681a3bbf05&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7dcecc29-3ff3-4e34-be6d-c5e52c612c93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7dcecc29-3ff3-4e34-be6d-c5e52c612c93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:349,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae78d52d-0b50-4a9b-ac8a-f03f52fcb4b8&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;10ffed23-885a-4137-9bd9-e10ffde9f7e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10ffed23-885a-4137-9bd9-e10ffde9f7e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:342,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40cd08f4-c2df-461e-9a72-6b15efe590c4&quot;,&quot;title&quot;:&quot;/_plugin/ssh/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;de8f071d-a4e8-4cea-a2b7-6fb2f05e78e5&quot;,&quot;title&quot;:&quot;download with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download with password should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:391,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/upload.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;upload.txt\&quot;&#x27;, &#x27;Content-Disposition is not attachment&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1b6cd5d2-4b07-4bbe-9acf-4fb11a9d204e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b6cd5d2-4b07-4bbe-9acf-4fb11a9d204e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:391,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c6dfa533-9057-4ca0-b5fb-d4a4654b6a30&quot;,&quot;title&quot;:&quot;download not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download not existing file should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:328,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/blablablaff.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7ae036e5-b746-4757-b27e-e36e3ea977b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ae036e5-b746-4757-b27e-e36e3ea977b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:328,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6da82f36-f6ca-4d52-9092-bc9a7237d87e&quot;,&quot;title&quot;:&quot;download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download directory should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:377,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6c4f20be-fa02-451f-8932-0b551f11a90c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c4f20be-fa02-451f-8932-0b551f11a90c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:377,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;D:\\projets\\mr-agent\\test/worker/mocha-report&quot;,&quot;reportTitle&quot;:&quot;bin&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>