<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:115,&quot;tests&quot;:97,&quot;passes&quot;:97,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-06-06T23:10:24.370Z&quot;,&quot;end&quot;:&quot;2019-06-06T23:10:43.653Z&quot;,&quot;duration&quot;:19283,&quot;testsRegistered&quot;:97,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;980c9b4e-5f46-4a3d-bf37-fd83d5de3cec&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f7c01ba5-71c3-4e1e-b945-c3ce66ec2276&quot;,&quot;title&quot;:&quot;main-api&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6e32e627-90d4-420f-a772-bde3a874a066&quot;,&quot;title&quot;:&quot;GET /api/checkAgent&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkAgent should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkAgent&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.status, 0);\n\t\t\t\tassert.strictEqual(typeof res.body.version, &#x27;string&#x27;);\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1a8f705a-4ac1-4eb0-a1c4-faadd793e86e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a8f705a-4ac1-4eb0-a1c4-faadd793e86e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4583ce65-f410-4e76-b0bd-6503566a5b73&quot;,&quot;title&quot;:&quot;GET /api/checkPort&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/checkPort should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/checkPort?port=&#x27;+PORT+&#x27;&amp;host=&#x27;+HOST) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\t\t\tassert.strictEqual(res.body.result, true);\n\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;64e2b5c3-626c-4546-9e3e-eb32d8999142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64e2b5c3-626c-4546-9e3e-eb32d8999142&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14ef993c-1986-43e0-b446-92940e3fef52&quot;,&quot;title&quot;:&quot;GET /api/admin/os/cpus&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api GET /api/admin/os/cpus should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/api/admin/os/cpus&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body), true, &#x27;body is array&#x27;)\t\t\n\t\t\t\tassert.strictEqual(res.body.length &gt; 0, true, &#x27;result is empty&#x27;)\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b24db4f5-19d0-42b5-bcb6-c539ec4fa465&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b24db4f5-19d0-42b5-bcb6-c539ec4fa465&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3edaab08-8b05-451f-9177-31ab8d46e0a5&quot;,&quot;title&quot;:&quot;POST /api/getConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/getConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;POST&#x27;, &#x27;/api/getConfig&#x27;) )\n.then( (res) =&gt; {\t\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tconfData = res.body.data\n\tdone()\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1934d3ef-9398-404d-9e07-a46019ed7394&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1934d3ef-9398-404d-9e07-a46019ed7394&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1d23aa32-a55a-4879-b87c-00a7e45d2de9&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {}\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;40e868a0-f2d8-4c2c-8d88-b770db83f767&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40e868a0-f2d8-4c2c-8d88-b770db83f767&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db1d3708-34cb-4f9b-bfa5-acd1952619af&quot;,&quot;title&quot;:&quot;POST /api/setConfig without data.getConfig()&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig without data.getConfig() should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: &#x27;{}&#x27;\n}\n\nexecRequestExpectError(updateOpt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7b4f426b-4394-46af-9142-bf5c97382c10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b4f426b-4394-46af-9142-bf5c97382c10&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82ede433-b6e6-4292-8a33-9cd542b41222&quot;,&quot;title&quot;:&quot;POST /api/setConfig&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\10-main-api.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;main-api POST /api/setConfig should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let updateOpt = getHttpOptions(&#x27;POST&#x27;, &#x27;/api/setConfig&#x27;)\t\t\t\t\nupdateOpt.body = {\n\tdata: confData\n}\n\nrequest( updateOpt )\n.then( (res) =&gt; {\t\n\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.data, &#x27;string&#x27;);\n\tdone()\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;003b9cd5-bf40-4160-805a-cbb5bdbdc243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;003b9cd5-bf40-4160-805a-cbb5bdbdc243&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e140db2-7e5e-4874-970c-9ae637da9949&quot;,&quot;title&quot;:&quot;plugin-dns&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6af29523-7367-4f60-91bf-593b5a652248&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b8837fb8-5733-4839-843a-3d4a8fb53e41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8837fb8-5733-4839-843a-3d4a8fb53e41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:60,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;55bae622-fbf7-47e2-a424-a6093e3734b8&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=1.1.1.1&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;1.1.1.1&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [&#x27;one.one.one.one&#x27;] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;41ebdb71-74eb-4245-882e-67942c15c24b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41ebdb71-74eb-4245-882e-67942c15c24b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2b2b221e-79d3-41a7-a5de-9c267d1b51c6&quot;,&quot;title&quot;:&quot;GET /_plugin/dns/dnsReverse (no result)&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-dns.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-dns GET /_plugin/dns/dnsReverse (no result) should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/dns/dnsReverse?ip=0.0.0.0&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tconsole.log(res.body)\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(res.body.ip, &#x27;0.0.0.0&#x27;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(_.isArray(res.body.hostnames), true, &#x27;hostnames is not array&#x27;)\t\t\t\t\t\t\n\t\t\t\tassert.deepEqual(res.body.hostnames, [] )\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;68995202-c59e-46fb-af98-553410b0dcb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68995202-c59e-46fb-af98-553410b0dcb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56ff21b0-7a64-4170-b623-5fec6efb208f&quot;,&quot;title&quot;:&quot;GET /_plugin/filesystem&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/filesystem should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee59ab87-02b6-449d-9fe2-b573f8bbc8fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee59ab87-02b6-449d-9fe2-b573f8bbc8fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c7fe35aa-7996-48ba-b33e-60fae544b663&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/moveFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e6eecdaf-232a-437d-abcf-5695c33e85b0&quot;,&quot;title&quot;:&quot;POST /moveFile no path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;343713e6-9db3-437e-a9d5-71bf31c7544a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;343713e6-9db3-437e-a9d5-71bf31c7544a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b6303405-604e-40e1-8c9a-4110ec1122cb&quot;,&quot;title&quot;:&quot;POST /moveFile no dest&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile no dest should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/testmove1.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: path\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ac6cbb64-6562-4f7d-b8b7-ff0abfa3af4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac6cbb64-6562-4f7d-b8b7-ff0abfa3af4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bd4762ea-5873-4651-a74c-0fc8a36abd34&quot;,&quot;title&quot;:&quot;POST /moveFile to directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 - dest is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile to directory should return 400 - dest is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b07816aa-50ca-45be-9cfa-5bf5593475d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b07816aa-50ca-45be-9cfa-5bf5593475d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9f9cf38-4172-45fb-8f5a-6edbb753c2ef&quot;,&quot;title&quot;:&quot;POST /moveFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile dest directory does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test-move1.txt&#x27;\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.unlinkSync(tmpDir+&#x27;/blablabla&#x27;)\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c33df85f-a326-41b0-ae39-d80b3ffe7eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c33df85f-a326-41b0-ae39-d80b3ffe7eac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e90ce48b-3aba-45fe-823e-6168fc75c0be&quot;,&quot;title&quot;:&quot;POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile path=\\\\localhost\\d$\\tmp/test.txt should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;942f6e36-ecdf-467b-bb77-2e3705d0b016&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;942f6e36-ecdf-467b-bb77-2e3705d0b016&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85382b8c-6c40-441b-81d2-d0770770f72e&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6eb5a96f-7f37-436f-8b2a-a566291c6b1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6eb5a96f-7f37-436f-8b2a-a566291c6b1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ceb230a6-0a23-4a96-bc44-7938c1baef93&quot;,&quot;title&quot;:&quot;POST /moveFile - dest already exists - overwrite=true&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile - dest already exists - overwrite=true should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir+&#x27;/test.txt&#x27;\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nfs.writeFileSync(source, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest,\n\toverwrite: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;838d4051-cc06-461a-a5d8-4a97c9e5b100&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;838d4051-cc06-461a-a5d8-4a97c9e5b100&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0799bfef-9afc-45bd-b82f-c7d2b01ed35c&quot;,&quot;title&quot;:&quot;POST /moveFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/moveFile POST /moveFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/moveFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0f28b4eb-657d-42cc-91a0-98b2dcd2dbc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f28b4eb-657d-42cc-91a0-98b2dcd2dbc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4838fab9-ea79-4301-8205-460a5e37637e&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/copyFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6015a5bb-4454-4b6f-8b39-03797a049d2d&quot;,&quot;title&quot;:&quot;POST /copyFile dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest is directory should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fd1b13a5-abef-47ee-9e1d-88ffcbd8d44d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd1b13a5-abef-47ee-9e1d-88ffcbd8d44d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b7528a9-3264-43f9-98e8-be59c5bd2566&quot;,&quot;title&quot;:&quot;POST /copyFile dest already exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest already exists should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nif (!fs.pathExistsSync(dest))\n\tfs.writeFileSync(dest, &#x27;test&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\t\t\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;43530bc8-8fcf-4206-9bbf-c5d3bd65df54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43530bc8-8fcf-4206-9bbf-c5d3bd65df54&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d80b3015-a042-4f2f-a9b9-bf2e70ca31c6&quot;,&quot;title&quot;:&quot;POST /copyFile path does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path does not exists should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceDir+&#x27;/blablabla&#x27;\nlet dest = tmpDir+&#x27;/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6d0fc60d-64b3-41a4-964b-da5d758cef9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d0fc60d-64b3-41a4-964b-da5d758cef9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4009a2e1-d6ad-460a-b06f-1999fb2d6342&quot;,&quot;title&quot;:&quot;POST /copyFile dest directory does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile dest directory does not exists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/blablabla/index.txt&#x27;\nif (fs.pathExistsSync(tmpDir+&#x27;/blablabla&#x27;))\n\tfs.removeSync(tmpDir+&#x27;/blablabla&#x27;)\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;45518270-641e-4675-89f6-a6cc6dbc796c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45518270-641e-4675-89f6-a6cc6dbc796c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a02f8c95-35c1-4e4e-8684-212331b9c19a&quot;,&quot;title&quot;:&quot;POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = sourceFile\nlet dest = tmpDir+&#x27;/index.txt&#x27;\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f3cc8ba9-50fb-4e05-9c88-ed8fcb917369&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f3cc8ba9-50fb-4e05-9c88-ed8fcb917369&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9431d93-eaee-4b41-ac47-a2b14635fe4e&quot;,&quot;title&quot;:&quot;POST /copyFile source is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error - source is directory&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/copyFile POST /copyFile source is directory should return error - source is directory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let source = tmpDir\nlet dest = tmpDir+&#x27;/testMoved.txt&#x27;\n\t\t\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/copyFile&#x27;)\nopt.body = {\n\tpath: source,\n\tdest: dest\n}\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6188ab2a-c201-48f0-bcec-3ba9886b4456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6188ab2a-c201-48f0-bcec-3ba9886b4456&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d881725c-c43b-4e15-99f8-e414fa84910f&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0298ec10-4b05-456c-92e5-c3fe41bcc996&quot;,&quot;title&quot;:&quot;GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.name, &#x27;index.js&#x27;);\n\tassert.strictEqual(res.body.contentType.contains(&#x27;application/javascript&#x27;), true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;92639e52-8c42-485e-8920-4c05648f7945&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92639e52-8c42-485e-8920-4c05648f7945&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;04bd3291-f2c5-4e92-908b-e77d3d9172cf&quot;,&quot;title&quot;:&quot;GET /fileinfo path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo?path=blablabla&#x27;)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1ee23c17-f186-4a8c-9270-1822b105ce9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ee23c17-f186-4a8c-9270-1822b105ce9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2902625-927c-44ae-9d85-7c57035a7d52&quot;,&quot;title&quot;:&quot;GET /fileinfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileinfo GET /fileinfo should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileinfo&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;538774a3-24b6-43ae-8c4f-863af147f966&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;538774a3-24b6-43ae-8c4f-863af147f966&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9a12b08-685d-4e00-8d39-eb7852c6c8c6&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9532b968-685c-4258-8fc1-ec9842479367&quot;,&quot;title&quot;:&quot;GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=D:\\projets\\mr-agent\\test\\worker/../../dist/index.js should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=&#x27;+sourceFile)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, true);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;79e9cc6a-fdf4-459d-8ed6-a0daabae5be3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79e9cc6a-fdf4-459d-8ed6-a0daabae5be3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4129271-42c8-43c2-9c5b-ff60415c93a2&quot;,&quot;title&quot;:&quot;GET /fileExists path=blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists path=blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists?path=blablabla&#x27;)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.result, false);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;04cb48a9-9536-4f51-bcc3-a8b8a0be3b08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04cb48a9-9536-4f51-bcc3-a8b8a0be3b08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f362fab8-25b8-4325-8951-8ef8afa4de87&quot;,&quot;title&quot;:&quot;GET /fileExists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/fileExists GET /fileExists should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/fileExists&#x27;)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;19dbe12d-2776-4a4b-82b3-605e49fbeee1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19dbe12d-2776-4a4b-82b3-605e49fbeee1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;380f47be-68da-4de8-a811-4ef0aad2f0ca&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/execScript&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f1412026-ed22-4b87-b711-3a49cc87f027&quot;,&quot;title&quot;:&quot;POST execScript type=shell&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=shell should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bcbc89c0-667c-4c49-9a9e-998d294c65d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bcbc89c0-667c-4c49-9a9e-998d294c65d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a41a26ff-4341-4467-b85e-bef8c0c07767&quot;,&quot;title&quot;:&quot;POST execScript type=blabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=blabla should return error 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;dir\&quot;,\n\ttype: &#x27;blabla&#x27;\n}\nexecRequestExpectError(opt, done, 412)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;350c4b88-781b-4e73-99ff-6add0334e643&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;350c4b88-781b-4e73-99ff-6add0334e643&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58a1b7ff-97ef-4b08-8b2d-bac10d259c1c&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 0);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;89d95258-c763-4ec3-b962-dfb5cfb9d2c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89d95258-c763-4ec3-b962-dfb5cfb9d2c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de6747c4-66b3-48a0-8770-10b48beb479f&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with result &amp;&amp; exitCode&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with result &amp;&amp; exitCode should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;result = 2*2\\nexitCode=2\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nrequest( opt )\n.then( (res) =&gt; {\t\n\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.stdout, 4);\n\tassert.strictEqual(res.body.exitCode, 2);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;993dc900-2622-40ac-b4ac-8b11973628f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;993dc900-2622-40ac-b4ac-8b11973628f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c91c835d-5c98-4133-bdde-714029053960&quot;,&quot;title&quot;:&quot;POST execScript type=javascript with syntax error&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/execScript POST execScript type=javascript with syntax error should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/execScript&#x27;)\nopt.body = {\n\tscript: \&quot;blabla\&quot;,\n\ttype: &#x27;javascript&#x27;\n}\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2aad974c-5878-4ec7-997d-d994e6d72139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2aad974c-5878-4ec7-997d-d994e6d72139&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a0aaf9f-0134-4bc2-88c3-f28b627db148&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;395280c4-9494-448c-9186-6234c68b87ee&quot;,&quot;title&quot;:&quot;POST /_plugin/filesystem/writeTextFile&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST /_plugin/filesystem/writeTextFile should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\trequest( opt )\n\t\t\t.then( (res) =&gt; {\t\n\t\t\nassert.strictEqual(res.statusCode, 200);\nassert.strictEqual(typeof res.body, &#x27;object&#x27;);\nassert.strictEqual(typeof res.body.path, &#x27;string&#x27;);\nassert.strictEqual(res.body.result, true);\ndone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\ndone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f5f92494-e127-4740-beb4-ec3ff3f59509&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5f92494-e127-4740-beb4-ec3ff3f59509&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ee5f039-26c2-47be-91c3-0bc9aede8b5c&quot;,&quot;title&quot;:&quot;POST writeTextFile, path does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/writeTextFile POST writeTextFile, path does not exist should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/writeTextFile&#x27;)\n\t\t\topt.body = {\npath: tmpDir+\&quot;/blabla/writeTextFile.txt\&quot;,\ncontent: &#x27;test&#x27;\n\t\t\t}\n\n\t\t\texecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;527508a3-af55-4bff-992c-80efc9a4a523&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;527508a3-af55-4bff-992c-80efc9a4a523&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4255c791-df90-4add-b419-3fce5f551c8a&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/list&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;30256499-459c-4170-9352-2f8344998ece&quot;,&quot;title&quot;:&quot;GET path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 23);\n\tassert.strictEqual(res.body.files.length, 23);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;31e959bb-e43e-49e3-8167-99c5add5f281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31e959bb-e43e-49e3-8167-99c5add5f281&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a162625-2773-4235-b2f3-a8a7efc4a593&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 221);\n\tassert.strictEqual(res.body.files.length, 221);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1bef28b0-aa30-4773-b7e0-9287b84df5db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1bef28b0-aa30-4773-b7e0-9287b84df5db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd9c83cb-8286-4941-ac20-ded1a5805096&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;filter=*.js&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;filter=*.js&amp;path=&#x27;+sourceDir\nrequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\tassert.strictEqual(res.body.total, 65);\n\tassert.strictEqual(res.body.files.length, 65);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c702e4e7-8ad1-42af-a575-dec0d728881e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c702e4e7-8ad1-42af-a575-dec0d728881e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2cfe6e6d-94b0-4a88-8c46-16d2d74d6cc8&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return file list&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=D:\\projets\\mr-agent\\test\\worker/../../dist should return file list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;maxResults=10&amp;filter=*.ts&amp;path=&#x27;+sourceDir\n\trequest( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query) )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files, &#x27;object&#x27;);\n\t\tassert.strictEqual(typeof res.body.files.push, &#x27;function&#x27;);\n\t\tassert.strictEqual(res.body.total, 65);\n\t\tassert.strictEqual(res.body.files.length, 10);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a2ff6952-a66f-419f-b221-5649c02c339a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2ff6952-a66f-419f-b221-5649c02c339a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af0b8a18-7b5c-4451-885a-99b4f20b8b36&quot;,&quot;title&quot;:&quot;GET recursive=true&amp;path=/blablabla&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/list GET recursive=true&amp;path=/blablabla should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var query = &#x27;recursive=true&amp;path=/blablabla&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/list?&#x27;+query)\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;25243d24-cd27-46b6-b3f9-164074eae41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25243d24-cd27-46b6-b3f9-164074eae41a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c33eaa0-ceae-4aec-a89f-73d90e310dd7&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;731a1f5e-89a8-4ad7-8f27-337be37f4ae3&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1041,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\t//console.log( res.body)\n\t\tassert.strictEqual(res.statusCode, 200);\n\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;, &#x27;body is not object&#x27;);\n\t\tassert.strictEqual(typeof res.body.file, &#x27;object&#x27;, &#x27;body.file is not object&#x27;);\t\t\t\t\n\t\tassert.strictEqual(res.body.path, path, &#x27;body.path != &#x27;+path);\n\t\tassert.strictEqual(fs.pathExistsSync(path), true, &#x27;uploaded file does not exists&#x27;);\n\t\tassert.strictEqual(fs.statSync(path).size != 0, true, &#x27;uploaded file size != 0&#x27;);\n\t\t\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c01af35e-78b2-495d-bd63-7b6da74abc8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c01af35e-78b2-495d-bd63-7b6da74abc8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1041,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5a9ef74-b5ec-4859-bb35-dc3b568844a7&quot;,&quot;title&quot;:&quot;upload no file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload no file should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:955,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload2.txt&#x27;\n\tif (fs.pathExistsSync(path))\n\t\tfs.unlinkSync(path)\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        name: sourceFileName,\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;440f261e-bd33-4f38-8f09-c0a4661f081d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;440f261e-bd33-4f38-8f09-c0a4661f081d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:955,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4be09628-732e-4a6e-be94-fce84a95c3db&quot;,&quot;title&quot;:&quot;upload file - dest is directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest is a directory)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest is directory should return 400 (dest is a directory)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d1a90562-a2f8-4014-b31e-da93c5fdb76e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1a90562-a2f8-4014-b31e-da93c5fdb76e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb65ecb0-70b9-4d6c-8280-3db6bdcb67b3&quot;,&quot;title&quot;:&quot;upload file - dest directory does not exist&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 (dest a directory does not exist)&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload file - dest directory does not exist should return 400 (dest a directory does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/uploadblablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cd91b31e-fc1e-4497-84f5-227573224557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd91b31e-fc1e-4497-84f5-227573224557&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9a1ddcd-9d1f-4642-a8fc-7eafd527439c&quot;,&quot;title&quot;:&quot;upload existing file - overwrite=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return error&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/upload upload existing file - overwrite=false should return error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/upload?path=&#x27;+path+&#x27;&amp;overwrite=false&#x27;)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\texecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;533df8d4-3e6d-4463-9cee-bb82ec8ce9c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;533df8d4-3e6d-4463-9cee-bb82ec8ce9c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f44e4982-1f15-4436-9ca2-a77bd78de965&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/deleteFiles&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1c3f6265-fe6e-4b43-9785-eb3712af7761&quot;,&quot;title&quot;:&quot;delete existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nfs.writeFileSync(path, &#x27;test&#x27;)\n\t\t\nrequest( opt )\n.then( (res) =&gt; {\t\n\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(fs.pathExistsSync(path), false);\n\tassert.strictEqual(res.body.result, true);\n\tassert.strictEqual(typeof res.body.filename, &#x27;string&#x27;);\n\tassert.strictEqual(res.body.path, path);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bdaa3f6c-eb75-41bf-b927-d4908350bce3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdaa3f6c-eb75-41bf-b927-d4908350bce3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac7e3ba5-c9b3-4c83-a24d-81493029f19b&quot;,&quot;title&quot;:&quot;delete not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/deleteFiles delete not existing file should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = tmpDir+&#x27;/fileToDelete.txt&#x27;\n\nlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/filesystem/deleteFiles&#x27;)\nopt.body = {\n\tpath: path\n}\nif (fs.pathExistsSync(path))\n\tfs.unlinkSync(path)\n\t\t\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;840cfacf-0a5c-4733-bd6b-dcb3697ba71a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;840cfacf-0a5c-4733-bd6b-dcb3697ba71a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa57a9dc-3f16-4491-831a-ab04ee3da25e&quot;,&quot;title&quot;:&quot;/_plugin/filesystem/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c4212f53-685f-430e-9f6d-0051ce96796f&quot;,&quot;title&quot;:&quot;Download existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript; charset=UTF-8&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-length&#x27;] &gt; 0 , true, &#x27;content-type &gt; 0&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d797b72a-e555-487e-9b05-34cf13d86d81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d797b72a-e555-487e-9b05-34cf13d86d81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aaffd83a-5495-42c5-afd8-50c77d6787b5&quot;,&quot;title&quot;:&quot;Download existing file - compress=false&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download existing file - compress=false should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;&amp;compress=false&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\t/*assert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/javascript&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;index.js\&quot;&#x27;);*/\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;384e83cd-32b7-44d4-872a-ec8f6fbee5af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;384e83cd-32b7-44d4-872a-ec8f6fbee5af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;797c1b75-76a6-4900-837c-7cd943b3a2be&quot;,&quot;title&quot;:&quot;Download file - file does not exists&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download file - file does not exists should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceFile+&#x27;/balbalba&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;348d7520-3925-4c2b-81d9-f96fa0c95e70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;348d7520-3925-4c2b-81d9-f96fa0c95e70&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fbec2106-c02e-40da-97d5-242b18345309&quot;,&quot;title&quot;:&quot;Download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\20-plugin-filesystem.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/filesystem/download Download directory should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:424,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = &#x27;path=&#x27;+sourceDir\nlet dest = tmpDir+&#x27;/downloadZip.zip&#x27;\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/filesystem/download?&#x27;+query)\nopt.json = false\nif (fs.pathExistsSync(dest))\n\tfs.unlinkSync(dest)\nlet destFileStream = fs.createWriteStream(dest);\nrequest( opt , (error, res, body) =&gt; {\n\tassert.strictEqual(res.statusCode, 200);\n\tassert.strictEqual(typeof res.body, &#x27;string&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-type&#x27;], &#x27;application/zip&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;dist.zip\&quot;&#x27;);\t\t\n})\n.pipe(destFileStream)\n\t\t    .on(&#x27;finish&#x27;, () =&gt; {\n\n\t\t    \tif (fs.pathExistsSync(dest) &amp;&amp; (fs.statSync(dest).size &gt; 0))\n\t\t       \t\tdone();\t\t \t      \n\t\t       \telse\n\t\t       \t\tdone(&#x27;Downloaded file does not exists or is empty&#x27;);\t\t \t      \n\t\t    })\n\t\t    .on(&#x27;error&#x27;, (error) =&gt; {\n\t\t        done(error);\n\t\t    })&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8c4e2742-e61c-4373-90af-65a33d51e412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c4e2742-e61c-4373-90af-65a33d51e412&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:424,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0028c453-ca10-424b-97b8-56401309984d&quot;,&quot;title&quot;:&quot;plugin-http&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f808fb8-298e-4fa5-9ff3-82109b5b5342&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(typeof res.body.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.body.status, 0);\n\texpect(res.body.status).to.equal(200);\n\tassert.strictEqual(typeof res.body.body.version, &#x27;string&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;92ccb577-3731-47ab-bee2-cbf8c6648cd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92ccb577-3731-47ab-bee2-cbf8c6648cd5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7f0e211d-9c51-4b67-9b93-3505808d7029&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown host should return 200 - content is error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;blablabla:&#x27;+PORT+&#x27;/api/checkAgent&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, true);\n\tassert.strictEqual(typeof res.body.error !== &#x27;undefined&#x27;, true);\n\tassert.strictEqual(res.body.status, null);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ad6c288c-c277-465f-8ace-d5823cd002dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad6c288c-c277-465f-8ace-d5823cd002dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:93,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a840aae-387c-4ca6-9b3e-6c39b687a5c5&quot;,&quot;title&quot;:&quot;POST /_plugin/http/request to unkown url&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\30-plugin-http.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200 - content is error 404&quot;,&quot;fullTitle&quot;:&quot;plugin-http POST /_plugin/http/request to unkown url should return 200 - content is error 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/http/request&#x27;)\nopt.body = {\n\turl: &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/api/checkAgentBLABLABLA&#x27;,\n\tmethod: &#x27;GET&#x27;,\n\tjson: true\n}\nrequest( opt )\n.then( (res) =&gt; {\t\t\n\t//console.log(res.body)\t\n\texpect(res.statusCode).to.equal(200);\n\tassert.strictEqual(typeof res.body, &#x27;object&#x27;);\n\tassert.strictEqual(res.body.isError, false);\n\tassert.strictEqual(res.body.error, null);\n\tassert.strictEqual(res.body.status, 404);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;83ecf5f8-8460-43e2-aae2-9518d0eed671&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83ecf5f8-8460-43e2-aae2-9518d0eed671&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5504c6bc-0cc3-4e81-9a15-148a51641818&quot;,&quot;title&quot;:&quot;plugin-metrics&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;70701b00-8893-4915-818a-06e0399a2dcb&quot;,&quot;title&quot;:&quot;GET metrics getInfos&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics getInfos should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual( _.isArray(res.body.metrics) , true, &#x27;body.metrics is not array&#x27;)\t\t\n\t\t\t\tassert.strictEqual( res.body.metrics.length , 5, &#x27;body.metrics length is not 5&#x27;)\t\t\n\t\t\t\tlet cpuMetric =  res.body.metrics[0]\n\t\t\t\tassert.strictEqual( cpuMetric.name , &#x27;cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( cpuMetric.url , &#x27;http://&#x27;+HOST+&#x27;:&#x27;+PORT+&#x27;/_plugin/metrics/cpu&#x27;)\t\t\t\n\t\t\t\tassert.strictEqual( _.isArray(cpuMetric.args) , true, &#x27;body.metrics[0].args is not array&#x27;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;14033ca9-8143-4589-9c9d-f294b2b89f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14033ca9-8143-4589-9c9d-f294b2b89f8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73d7bae3-c057-4be2-ac31-01529895cfd7&quot;,&quot;title&quot;:&quot;GET metrics systemInfo&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.release == &#x27;string&#x27;, true, \&quot;&#x27;release&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.uptime == &#x27;number&#x27;, true, \&quot;&#x27;uptime&#x27; property is not number&#x27;\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.osType == &#x27;string&#x27;, true, \&quot;&#x27;osType&#x27; property is not number&#x27;\&quot;)\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;42796684-0240-4b00-9c50-ab56a1ac3fbe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42796684-0240-4b00-9c50-ab56a1ac3fbe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b90b1038-22ec-45de-8af3-53ba6ac547b9&quot;,&quot;title&quot;:&quot;GET metrics systemInfo format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics systemInfo format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/systemInfo?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 0 )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;340a9c0e-cfca-423f-8f5c-72b3ddf4d398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;340a9c0e-cfca-423f-8f5c-72b3ddf4d398&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10406ce3-f0ee-4bb5-b22d-3383cfd9c69b&quot;,&quot;title&quot;:&quot;GET metrics cpu&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1028,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.ellapsed == &#x27;number&#x27;, true, \&quot;&#x27;ellapsed&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.percentageCPU == &#x27;number&#x27;, true, \&quot;&#x27;percentageCPU&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;581f7303-4149-4a33-b2f8-1b5605944990&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;581f7303-4149-4a33-b2f8-1b5605944990&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1028,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a2e8548-b240-41f3-a9ec-d58cc3aa974c&quot;,&quot;title&quot;:&quot;GET metrics cpu format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c482b367-bbf2-4de3-90c2-d7881e0d9823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c482b367-bbf2-4de3-90c2-d7881e0d9823&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;83105834-93d1-468b-afd6-ea7ab8ea1932&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, false, 3 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a3c3f2d5-bcf5-4985-8f70-349952dfb17e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3c3f2d5-bcf5-4985-8f70-349952dfb17e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4cbaf149-41e7-4a29-af19-85a485ca2f20&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c274a7c1-0d25-4084-9ca4-12f78564e5d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c274a7c1-0d25-4084-9ca4-12f78564e5d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db974dfd-015b-44e6-8ade-bd113b7584b6&quot;,&quot;title&quot;:&quot;GET metrics cpu warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics cpu warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/cpu?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3863eb27-ad01-4f4d-a6ec-0a3c04b4e211&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3863eb27-ad01-4f4d-a6ec-0a3c04b4e211&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1006,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c30e3b3a-945b-4f38-8270-b313ab4f0272&quot;,&quot;title&quot;:&quot;GET metrics memory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedPercent == &#x27;number&#x27;, true, \&quot;&#x27;usedPercent&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.usedMem == &#x27;number&#x27;, true, \&quot;&#x27;usedMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.totalMem == &#x27;number&#x27;, true, \&quot;&#x27;totalMem&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;29bc5d66-262e-4672-9434-2a49a2a13168&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29bc5d66-262e-4672-9434-2a49a2a13168&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;744ec7d0-8650-45c2-a398-b01c9190e379&quot;,&quot;title&quot;:&quot;GET metrics memory format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;15b0cdcd-3c90-4136-ac40-fe6bb066efd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15b0cdcd-3c90-4136-ac40-fe6bb066efd7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b590e54c-61a8-4383-8dcd-1afcd69bcf62&quot;,&quot;title&quot;:&quot;GET metrics memory warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8fc1cdc6-290e-4b58-bce9-e8908c7c5b74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fc1cdc6-290e-4b58-bce9-e8908c7c5b74&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a81e1c04-f7d2-4559-8aae-988efc833bc2&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;79ab7fd4-9b50-4adb-a5f8-f48cacf6cfe8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79ab7fd4-9b50-4adb-a5f8-f48cacf6cfe8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b31af19-1498-41bb-b306-e854693048b4&quot;,&quot;title&quot;:&quot;GET metrics memory warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics memory warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/memory?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;79ab1326-7e27-4ca4-ab19-2175e647fa06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79ab1326-7e27-4ca4-ab19-2175e647fa06&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5832cbe-a42a-415d-809e-7fc30ad2b0a7&quot;,&quot;title&quot;:&quot;GET metrics load&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load1 == &#x27;number&#x27;, true, \&quot;&#x27;load1&#x27; property is not number\&quot;)\t\n\t\t\t\tassert.strictEqual(typeof res.body.load5 == &#x27;number&#x27;, true, \&quot;&#x27;load5&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\tassert.strictEqual(typeof res.body.load15 == &#x27;number&#x27;, true, \&quot;&#x27;load15&#x27; property is not number&#x27;\&quot;)\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;61fee92c-a0d9-4c55-bc56-7befc78d1950&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61fee92c-a0d9-4c55-bc56-7befc78d1950&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0ee201b8-112d-4134-992a-1cfaab53d2e8&quot;,&quot;title&quot;:&quot;GET metrics load format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0002caa2-e0d5-467b-84a3-721d29697221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0002caa2-e0d5-467b-84a3-721d29697221&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;660e1219-e53d-4425-9763-34adc5f18dba&quot;,&quot;title&quot;:&quot;GET metrics load warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0b1b57bd-0a54-4417-b9e9-927e49b53f4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b1b57bd-0a54-4417-b9e9-927e49b53f4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97c61195-5793-401f-b837-fbcada3415b3&quot;,&quot;title&quot;:&quot;GET metrics load warn1=10 critic1=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn1=10 critic1=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn1=10&amp;critic1=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f0206c49-e416-4671-bba0-7187dd402951&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0206c49-e416-4671-bba0-7187dd402951&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82d81fb2-e71a-4f88-b0ca-b0184a5657fe&quot;,&quot;title&quot;:&quot;GET metrics load warn5=10 critic5=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn5=10 critic5=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn5=10&amp;critic5=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9eff7796-6c71-418e-91c7-31cb96362fb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eff7796-6c71-418e-91c7-31cb96362fb5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4a5dd42-1b7b-4a43-846f-d3c74ad49753&quot;,&quot;title&quot;:&quot;GET metrics load warn15=10 critic15=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn15=10 critic15=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn15=10&amp;critic15=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;baa73107-dff2-4706-8e86-f0715a629bd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;baa73107-dff2-4706-8e86-f0715a629bd4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;39e973ee-5b8a-4401-8ccb-669768f83ee1&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5a6c5a13-0bf8-4275-afda-181afc068d9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a6c5a13-0bf8-4275-afda-181afc068d9c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;13fb8942-52b9-46ce-bfc2-4cdf01d75a20&quot;,&quot;title&quot;:&quot;GET metrics load warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics load warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/load?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;748d21fd-f4b5-479e-a961-30a2cea30645&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;748d21fd-f4b5-479e-a961-30a2cea30645&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e07cabe9-d7be-4262-9f9c-53d02b65f763&quot;,&quot;title&quot;:&quot;GET metrics disks&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return object&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks should return object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:487,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\n\t\t\t\texpect(res.statusCode).to.equal(200);\n\t\t\t\tassert.strictEqual(typeof res.body, &#x27;object&#x27;)\t\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t\tC:: {\n\t\t\t\t\tname: \&quot;C:\&quot;,\n\t\t\t\t\tfree: 5695320064,\n\t\t\t\t\ttotal: 128033222656,\n\t\t\t\t\tused: 122337902592,\n\t\t\t\t\ttotalGO: 119.2,\n\t\t\t\t\tusedGO: 113.9,\n\t\t\t\t\tfreeGO: 5.3,\n\t\t\t\t\tusedPercent: 96,\n\t\t\t\t\tisValid: true\n\t\t\t\t\t},\n\t\t\t\t*/\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ca648ef7-1b9f-4858-9a8d-bbddaa84867c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca648ef7-1b9f-4858-9a8d-bbddaa84867c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:487,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91c13f29-287a-412e-9e75-36d63f904c6d&quot;,&quot;title&quot;:&quot;GET metrics disks format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return string&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks format=nagios should return string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:498,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\t\n\t\t\t\tcheckNagiosResult( res, true )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;957992b4-8ce9-42ee-8d9a-0a51345428f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;957992b4-8ce9-42ee-8d9a-0a51345428f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:498,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e86e5cb-2c95-4ab9-a276-e0c365da3aaf&quot;,&quot;title&quot;:&quot;GET metrics disks warn=10 critic=5 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=10 critic=5 format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:462,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=10&amp;critic=5&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;28356f7f-a570-4fcd-92cb-2514c3008c12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;28356f7f-a570-4fcd-92cb-2514c3008c12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:462,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5f47ac57-b36f-43b3-9b58-7ec0c50d9fd7&quot;,&quot;title&quot;:&quot;GET metrics disks fs=blablabla format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 3&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks fs=blablabla format=nagios should return currentState 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:461,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?fs=blablabla&amp;format=nagios&#x27;) )\n.then( (res) =&gt; {\t\t\n\tcheckNagiosResult( res, false, 3)\t\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7d62ade1-7647-4778-b489-ee9f238fc2c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d62ade1-7647-4778-b489-ee9f238fc2c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:461,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a776ebe-1e72-4949-8f5e-9449b749b717&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=0 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 2&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=0 format=nagios should return currentState 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:457,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=0&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 2 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2eab2c6d-2dc1-46b4-87f3-8aa9b5cd7c69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2eab2c6d-2dc1-46b4-87f3-8aa9b5cd7c69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:457,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f166dcbc-3dc8-4f5a-a26d-8ad971edb99b&quot;,&quot;title&quot;:&quot;GET metrics disks warn=0 critic=100 format=nagios&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\40-plugin-metrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return currentState 1&quot;,&quot;fullTitle&quot;:&quot;plugin-metrics GET metrics disks warn=0 critic=100 format=nagios should return currentState 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:455,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request( getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/metrics/disks?warn=0&amp;critic=100&amp;format=nagios&#x27;) )\n\t\t\t.then( (res) =&gt; {\t\t\n\t\t\t\tcheckNagiosResult( res, true, 1 )\t\t\t\t\t\n\t\t\t\tdone();\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err =&gt; {\n\t\t\t\tdone(err)\n\t\t\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;60dbb32c-44f1-4b4d-a06c-897492407bc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60dbb32c-44f1-4b4d-a06c-897492407bc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:455,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9f5996a-39d3-4a17-b4f8-0e4667d91bcf&quot;,&quot;title&quot;:&quot;GET /_plugin/ssh&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404&quot;,&quot;fullTitle&quot;:&quot;GET /_plugin/ssh should return 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh&#x27;)\nexecRequestExpectError(opt, done, 404)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f4f758f5-11b0-4670-9e54-c0b7ef8e6f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4f758f5-11b0-4670-9e54-c0b7ef8e6f4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;274ce804-62a1-40c8-89bf-4d1747804f6f&quot;,&quot;title&quot;:&quot;/_plugin/ssh/upload&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;82c87194-f700-4985-80ff-883b527977fd&quot;,&quot;title&quot;:&quot;upload file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:976,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/tmp/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        },\n        file2: {\n            value: fs.createReadStream(sourceDir+&#x27;/Application.js&#x27;),\n            options: {\n                filename: &#x27;Application.js&#x27;,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    },\n\t\t\t\n\trequest( opt )\n\t.then( (res) =&gt; {\t\n\t\tcheckUploadResult( res, sourceFile, path  )\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3ef1c7ff-fc46-4e39-83f9-b39bdbde1906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ef1c7ff-fc46-4e39-83f9-b39bdbde1906&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:976,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e961d246-c038-4aa2-b579-6e3408ddb0c1&quot;,&quot;title&quot;:&quot;upload file in incorrect path&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/upload upload file in incorrect path should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:586,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let path = &#x27;/blablabla/upload.txt&#x27;\n\tlet opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/upload?path=&#x27;+path+&#x27;&amp;port=&#x27;+SSH_HOST_PORT+&#x27;&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD)\n\t\n\topt.formData = {\n        // Like &lt;input type=\&quot;text\&quot; name=\&quot;name\&quot;&gt;\n        name: sourceFileName,\n        // Like &lt;input type=\&quot;file\&quot; name=\&quot;file\&quot;&gt;\n        file1: {\n            value: fs.createReadStream(sourceFile),\n            options: {\n                filename: sourceFileName,\n                contentType: &#x27;application/javascript&#x27;\n            }\n        }\n    }\n\t\t\t\n\texecRequestExpectError( opt, done, 400 )&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;61f71af7-5938-4928-93a9-96f5f66568f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61f71af7-5938-4928-93a9-96f5f66568f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:586,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9fb2ee8-533f-4d83-9d39-fbdf2748b84c&quot;,&quot;title&quot;:&quot;/_plugin/ssh with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a18932f3-695e-476e-806d-30c455a96634&quot;,&quot;title&quot;:&quot;exec script on unknown host&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script on unknown host should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: &#x27;blablabla&#x27;,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-socket&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1090443d-81e4-44ed-a930-ee3241eeb5db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1090443d-81e4-44ed-a930-ee3241eeb5db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2256,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;648c8510-ed7f-4900-89ec-8e4bda49d3b5&quot;,&quot;title&quot;:&quot;exec script with incorrect password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with incorrect password should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2038,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;10565c37-22e2-4ff3-841a-3c68fdfece33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10565c37-22e2-4ff3-841a-3c68fdfece33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2038,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;310e90e7-3b39-4bce-a469-b68e00b05d4a&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:360,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6258f474-b0cf-4ab2-b391-e299f1923b2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6258f474-b0cf-4ab2-b391-e299f1923b2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:360,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0ee408b7-ce4c-4503-9804-2d96ffdf6090&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with password exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:389,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassword: SSH_HOST_PASSWORD\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a8262024-a824-4960-82a1-60ca3c3a4e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a8262024-a824-4960-82a1-60ca3c3a4e2e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:389,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c168374b-a22f-4bd5-bbd9-2655dfb10bd0&quot;,&quot;title&quot;:&quot;/_plugin/ssh with remote key&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0be2f564-13fc-4e28-8bc9-eee1ccf7a074&quot;,&quot;title&quot;:&quot;exec script with incorrect passphrase&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with incorrect passphrase should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;ls -l\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: &#x27;blablabla&#x27;\n\t}\n    \n\texecRequestExpectError(opt, null, 500)\n\t.then( res =&gt; {\n\t\tcheckSshError(res, &#x27;SshError&#x27;, false, &#x27;client-authentication&#x27;)\n\t\tdone()\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;66ce36a1-d6b3-4a91-9d74-419aa9d95c41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66ce36a1-d6b3-4a91-9d74-419aa9d95c41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:25000},{&quot;uuid&quot;:&quot;3510c736-7156-4d19-aec4-a7851d1fb2ca&quot;,&quot;title&quot;:&quot;exec script&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:426,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;echo $USER\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stdout.trim(), SSH_HOST_USERNAME, &#x27;stdout != &#x27;+SSH_HOST_USERNAME);\n\t\tassert.strictEqual(res.body.stderr, &#x27;&#x27;, &#x27;stderr is not empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 0, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;97baf708-43a4-4749-beb8-579a25892cc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97baf708-43a4-4749-beb8-579a25892cc4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:426,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5a5e76e-55ee-4dc1-b91f-374dda0ba576&quot;,&quot;title&quot;:&quot;exec script with stderr and exitCode=1&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh with remote key exec script with stderr and exitCode=1 should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let opt = getHttpOptions(&#x27;POST&#x27;, &#x27;/_plugin/ssh/exec&#x27;)\n\t\n\topt.body = {\n\t\tscript:  \&quot;cd /blablabla\&quot;,\n\t\thost: SSH_HOST,\n\t\tport: SSH_HOST_PORT,\n\t\tusername: SSH_HOST_USERNAME,\n\t\tpassphrase: SSH_HOST_PASSPHRASE\n\t}\n    \n    request( opt )\n\t.then( (res) =&gt; {\t\n\t\n\t\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\t\tassert.strictEqual(res.body.stderr.trim() !== &#x27;&#x27;, true, &#x27;stderr is empty&#x27;);\n\t\tassert.strictEqual(res.body.exitCode, 1, &#x27;exitCode != 0&#x27;);\n\t\tdone();\t\t\t\t\n\t})\n\t.catch( err =&gt; {\n\t\tdone(err)\n\t})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1b6dde26-45eb-4be1-8ad9-e38d6d0d0d3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b6dde26-45eb-4be1-8ad9-e38d6d0d0d3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64507c61-f6d0-4798-b8bc-bfc14b53f65e&quot;,&quot;title&quot;:&quot;/_plugin/ssh/download&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dc8aadf3-1bce-4354-b1b5-1240b3c5ca08&quot;,&quot;title&quot;:&quot;download with password&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 200&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download with password should return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:391,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/upload.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nrequest( opt )\n.then( (res) =&gt; {\t\n\tassert.strictEqual(res.statusCode, 200, &#x27;status is not 200&#x27;);\n\tassert.strictEqual(res.headers[&#x27;content-disposition&#x27;], &#x27;attachment; filename=\&quot;upload.txt\&quot;&#x27;, &#x27;Content-Disposition is not attachment&#x27;);\n\tdone();\t\t\t\t\n})\n.catch( err =&gt; {\n\tdone(err)\n})&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8ae0fd86-5e78-4b12-a0d9-4c6310eaedc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ae0fd86-5e78-4b12-a0d9-4c6310eaedc2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:391,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;abf01ba4-b8d7-4b69-ac18-2bc7c3c02d90&quot;,&quot;title&quot;:&quot;download not existing file&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download not existing file should return 400&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp/blablablaff.txt&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 400)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5e2f2d30-3439-4cf2-9dbb-b44e9921621c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e2f2d30-3439-4cf2-9dbb-b44e9921621c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9290cf65-ce58-4e53-8817-e3bbabe8f953&quot;,&quot;title&quot;:&quot;download directory&quot;,&quot;fullFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;file&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\50-plugin-ssh.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500&quot;,&quot;fullTitle&quot;:&quot;/_plugin/ssh/download download directory should return 500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:372,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let params = &#x27;path=/tmp&amp;host=&#x27;+SSH_HOST+&#x27;&amp;username=&#x27;+SSH_HOST_USERNAME+&#x27;&amp;password=&#x27;+SSH_HOST_PASSWORD+&#x27;&amp;port=&#x27;+SSH_HOST_PORT\nlet opt = getHttpOptions(&#x27;GET&#x27;, &#x27;/_plugin/ssh/download?&#x27;+params)\n\nexecRequestExpectError(opt, done, 500)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c285636d-aa9a-44c3-a7cd-01217faffd24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c285636d-aa9a-44c3-a7cd-01217faffd24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:372,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;D:\\projets\\mr-agent\\test/worker/mocha-report&quot;,&quot;reportTitle&quot;:&quot;bin&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\projets\\mr-agent\\test\\worker\\mocha-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>